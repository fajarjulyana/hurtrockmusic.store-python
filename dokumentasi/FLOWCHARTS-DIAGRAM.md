
# üé∏ FLOWCHARTS-DIAGRAM.md - Hurtrock Music Store

Dokumentasi lengkap flowchart dan diagram untuk sistem e-commerce alat musik Hurtrock Music Store dengan arsitektur Flask-only dan chat service Django.

## üìä Daftar Isi

1. [Arsitektur Sistem](#arsitektur-sistem)
2. [Entity Relationship Diagram (ERD)](#entity-relationship-diagram-erd)
3. [Data Flow Diagram (DFD)](#data-flow-diagram-dfd)
4. [Use Case Diagram](#use-case-diagram)
5. [Customer Journey Flowchart](#customer-journey-flowchart)
6. [Admin Workflow Flowchart](#admin-workflow-flowchart)
7. [Order Processing Flowchart](#order-processing-flowchart)
8. [Payment Processing Flowchart](#payment-processing-flowchart)
9. [Authentication Flow](#authentication-flow)
10. [Cart Management Flow](#cart-management-flow)
11. [Product Management Flow](#product-management-flow)
12. [Inventory Management Flow](#inventory-management-flow)
13. [Chat System Flow](#chat-system-flow)
14. [Error Handling Flow](#error-handling-flow)
15. [Deployment Architecture](#deployment-architecture)

---

## üèóÔ∏è Arsitektur Sistem

### Flask-Only Architecture dengan Chat Service

```mermaid
graph TD
    subgraph "Cloud Production Environment"
        MainApp[main.py<br/>Flask Application<br/>Port 5000]
        ChatService[Django Chat Service<br/>Port 8000]
        
        subgraph "Flask Components"
            WebStore[Web Store Interface]
            AdminPanel[Admin Panel Interface]
            StaticFiles[Static Files Server]
            APIEndpoints[API Endpoints]
        end
        
        subgraph "Django Components"
            WebSocket[WebSocket Handler]
            ChatAPI[Chat REST API]
            ChatModels[Chat Models]
        end
        
        Database[(PostgreSQL<br/>Main Database)]
        ChatDB[(SQLite<br/>Chat Database)]
    end
    
    MainApp --> WebStore
    MainApp --> AdminPanel
    MainApp --> StaticFiles
    MainApp --> APIEndpoints
    
    ChatService --> WebSocket
    ChatService --> ChatAPI
    ChatService --> ChatModels
    
    MainApp --> Database
    ChatService --> ChatDB
    
    MainApp -.->|JWT Token Auth| ChatService
    WebStore -.->|WebSocket| ChatService
    AdminPanel -.->|WebSocket| ChatService
```

### Component Layer Architecture

```mermaid
graph TB
    subgraph "Presentation Layer"
        UI[User Interface<br/>Jinja2 Templates + Bootstrap]
        JS[Frontend JavaScript<br/>Vanilla JS + WebSocket]
    end
    
    subgraph "Application Layer"
        Routes[Flask Routes]
        Auth[Authentication<br/>Flask-Login]
        CSRF[CSRF Protection<br/>Flask-WTF]
    end
    
    subgraph "Business Logic Layer"
        ProductMgmt[Product Management]
        OrderMgmt[Order Management]
        UserMgmt[User Management]
        PaymentMgmt[Payment Processing]
        ChatMgmt[Chat Management]
    end
    
    subgraph "Data Access Layer"
        ORM[SQLAlchemy ORM]
        Models[Database Models]
    end
    
    subgraph "External Services"
        Stripe[Stripe Payment Gateway]
        Midtrans[Midtrans Payment Gateway]
        ChatService[Django Chat Service]
    end
    
    subgraph "Storage Layer"
        PostgresDB[(PostgreSQL Database)]
        FileStorage[Static File Storage]
    end
    
    UI --> Routes
    JS --> Routes
    Routes --> Auth
    Routes --> CSRF
    Routes --> ProductMgmt
    Routes --> OrderMgmt
    Routes --> UserMgmt
    Routes --> PaymentMgmt
    Routes --> ChatMgmt
    
    ProductMgmt --> ORM
    OrderMgmt --> ORM
    UserMgmt --> ORM
    PaymentMgmt --> ORM
    
    PaymentMgmt --> Stripe
    PaymentMgmt --> Midtrans
    ChatMgmt --> ChatService
    
    ORM --> Models
    Models --> PostgresDB
    Routes --> FileStorage
```

---

## üóÉÔ∏è Entity Relationship Diagram (ERD)

### Complete Database Schema

```mermaid
erDiagram
    User {
        int id PK
        string email UK
        string password_hash
        string name
        string phone
        text address
        boolean active
        string role
        datetime created_at
    }

    Category {
        int id PK
        string name
        text description
        string image_url
        boolean is_active
        datetime created_at
    }

    Product {
        int id PK
        string name
        text description
        decimal price
        int stock_quantity
        string image_url
        string brand
        string model
        boolean is_active
        boolean is_featured
        int category_id FK
        int supplier_id FK
        decimal weight
        decimal length
        decimal width
        decimal height
        int minimum_stock
        int low_stock_threshold
        datetime created_at
    }

    ProductImage {
        int id PK
        int product_id FK
        string image_url
        boolean is_thumbnail
        int display_order
        datetime created_at
    }

    CartItem {
        int id PK
        int user_id FK
        int product_id FK
        int quantity
        datetime created_at
    }

    Order {
        int id PK
        int user_id FK
        decimal total_amount
        string status
        string tracking_number
        string courier_service
        int shipping_service_id FK
        decimal shipping_cost
        text shipping_address
        string payment_method
        int estimated_delivery_days
        datetime created_at
        datetime updated_at
    }

    OrderItem {
        int id PK
        int order_id FK
        int product_id FK
        int quantity
        decimal price
    }

    Supplier {
        int id PK
        string name
        string contact_person
        string email
        string phone
        text address
        string company
        text notes
        boolean is_active
        datetime created_at
    }

    ShippingService {
        int id PK
        string name
        string code UK
        decimal base_price
        decimal price_per_kg
        decimal price_per_km
        decimal volume_factor
        int min_days
        int max_days
        boolean is_active
        datetime created_at
    }

    PaymentConfiguration {
        int id PK
        string provider
        boolean is_active
        boolean is_sandbox
        string midtrans_client_key
        string midtrans_server_key
        string midtrans_merchant_id
        string stripe_publishable_key
        string stripe_secret_key
        string callback_finish_url
        string callback_unfinish_url
        string callback_error_url
        string notification_url
        string recurring_notification_url
        string account_linking_url
        datetime created_at
        datetime updated_at
    }

    MidtransTransaction {
        int id PK
        int order_id FK
        string transaction_id UK
        decimal gross_amount
        string payment_type
        string transaction_status
        string fraud_status
        datetime settlement_time
        string snap_token
        string snap_redirect_url
        text midtrans_response
        datetime created_at
        datetime updated_at
    }

    RestockOrder {
        int id PK
        int supplier_id FK
        string status
        decimal total_amount
        text notes
        datetime order_date
        datetime expected_date
        datetime received_date
        int created_by FK
        datetime created_at
    }

    RestockOrderItem {
        int id PK
        int restock_order_id FK
        int product_id FK
        int quantity_ordered
        int quantity_received
        decimal unit_cost
    }

    StoreProfile {
        int id PK
        string store_name
        string store_tagline
        text store_address
        string store_city
        string store_postal_code
        string store_phone
        string store_email
        string store_website
        string branch_name
        string branch_code
        string branch_manager
        string business_license
        string tax_number
        string logo_url
        string primary_color
        string secondary_color
        text operating_hours
        string facebook_url
        string instagram_url
        string whatsapp_number
        boolean is_active
        datetime created_at
        datetime updated_at
    }

    ChatRoom {
        int id PK
        string name UK
        int buyer_id FK
        string buyer_name
        string buyer_email
        boolean is_active
        datetime created_at
    }

    ChatMessage {
        int id PK
        int room_id FK
        int user_id FK
        string user_name
        string user_email
        text message
        string sender_type
        int product_id FK
        boolean is_read
        boolean is_deleted
        datetime created_at
        datetime updated_at
    }

    ChatSession {
        int id PK
        int room_id FK
        int user_id FK
        string user_name
        string user_email
        string user_role
        datetime started_at
        datetime ended_at
        boolean is_active
    }

    %% Relationships
    User ||--o{ CartItem : has
    User ||--o{ Order : creates
    User ||--o{ RestockOrder : creates
    User ||--o{ ChatRoom : owns
    User ||--o{ ChatMessage : sends
    User ||--o{ ChatSession : participates

    Category ||--o{ Product : contains
    Supplier ||--o{ Product : supplies
    
    Product ||--o{ ProductImage : has
    Product ||--o{ CartItem : added_to
    Product ||--o{ OrderItem : ordered_in
    Product ||--o{ RestockOrderItem : restocked_in
    Product ||--o{ ChatMessage : tagged_in

    Order ||--o{ OrderItem : contains
    Order ||--o{ MidtransTransaction : processed_by
    ShippingService ||--o{ Order : ships

    RestockOrder ||--o{ RestockOrderItem : contains
    Supplier ||--o{ RestockOrder : supplies

    ChatRoom ||--o{ ChatMessage : contains
    ChatRoom ||--o{ ChatSession : hosts
```

---

## üìä Data Flow Diagram (DFD)

### Level 0 - Context Diagram

```mermaid
graph TD
    Customer[üë§ Customer]
    Admin[üë®‚Äçüíº Admin/Staff]
    System[üé∏ HURTROCK MUSIC STORE SYSTEM]
    PaymentGateway[üí≥ Payment Gateway<br/>Stripe/Midtrans]
    CourierServices[üöö Courier Services<br/>JNE/J&T/SiCepat]
    EmailService[üìß Email Service]
    ChatService[üí¨ Chat Service]

    Customer -->|Browse Products<br/>Place Orders<br/>Make Payments<br/>Chat Support| System
    Admin -->|Manage Products<br/>Process Orders<br/>View Analytics<br/>Handle Chat| System
    
    System -->|Product Info<br/>Order Status<br/>Payment Confirmation<br/>Chat Messages| Customer
    System -->|Reports<br/>Dashboards<br/>Notifications<br/>Chat Management| Admin
    
    System -->|Payment Request| PaymentGateway
    System -->|Shipping Request| CourierServices
    System -->|Email Notifications| EmailService
    System -.->|Real-time Chat| ChatService
    
    PaymentGateway -->|Payment Response<br/>Transaction Status| System
    CourierServices -->|Shipping Status<br/>Tracking Info| System
    EmailService -->|Delivery Status| System
    ChatService -.->|Chat Messages<br/>User Status| System
```

### Level 1 - System Decomposition

```mermaid
graph TD
    Customer[üë§ Customer]
    AdminUser[üë®‚Äçüíº Admin User]
    
    subgraph "Main System Processes"
        P1[1.0<br/>User Authentication<br/>& Management]
        P2[2.0<br/>Product Catalog<br/>Management]
        P3[3.0<br/>Shopping Cart<br/>Management]
        P4[4.0<br/>Order Processing<br/>& Fulfillment]
        P5[5.0<br/>Payment Processing<br/>& Gateway Integration]
        P6[6.0<br/>Inventory<br/>Management]
        P7[7.0<br/>Reporting<br/>& Analytics]
        P8[8.0<br/>Real-time Chat<br/>Support]
    end
    
    subgraph "Data Stores"
        D1[(D1: User Database)]
        D2[(D2: Product Database)]
        D3[(D3: Category Database)]
        D4[(D4: Order Database)]
        D5[(D5: Payment Database)]
        D6[(D6: Inventory Database)]
        D7[(D7: Analytics Database)]
        D8[(D8: Chat Database)]
    end
    
    subgraph "External Entities"
        EXT1[Payment Gateway]
        EXT2[Courier Services]
        EXT3[Email Service]
    end
    
    %% Customer flows
    Customer --> P1
    Customer --> P2
    Customer --> P3
    Customer --> P4
    Customer --> P8
    
    %% Admin flows
    AdminUser --> P1
    AdminUser --> P2
    AdminUser --> P4
    AdminUser --> P6
    AdminUser --> P7
    AdminUser --> P8
    
    %% Process to data store flows
    P1 --> D1
    P2 --> D2
    P2 --> D3
    P3 --> D2
    P4 --> D4
    P4 --> D2
    P5 --> D5
    P6 --> D6
    P7 --> D7
    P8 --> D8
    
    %% External system flows
    P5 --> EXT1
    P4 --> EXT2
    P4 --> EXT3
    
    EXT1 --> P5
    EXT2 --> P4
    EXT3 --> P4
```

### Level 2 - Order Processing Detail

```mermaid
graph TD
    Customer[üë§ Customer]
    
    subgraph "Order Processing (Process 4.0)"
        P41[4.1<br/>Validate Order<br/>& Stock Check]
        P42[4.2<br/>Calculate Shipping<br/>& Total Cost]
        P43[4.3<br/>Process Payment<br/>Authorization]
        P44[4.4<br/>Create Order<br/>Record]
        P45[4.5<br/>Update Inventory<br/>Stock Levels]
        P46[4.6<br/>Generate Shipping<br/>Label & Tracking]
        P47[4.7<br/>Send Order<br/>Confirmation]
        P48[4.8<br/>Update Order<br/>Status]
    end
    
    subgraph "Data Stores"
        D2[(D2: Product Database)]
        D4[(D4: Order Database)]
        D5[(D5: Payment Database)]
        D6[(D6: Inventory Database)]
    end
    
    subgraph "External Systems"
        PaymentGW[Payment Gateway]
        CourierAPI[Courier API]
        EmailSys[Email System]
    end
    
    Customer --> P41
    P41 --> D2
    P41 --> P42
    P42 --> P43
    P43 --> PaymentGW
    PaymentGW --> P43
    P43 --> P44
    P44 --> D4
    P44 --> P45
    P45 --> D6
    P45 --> P46
    P46 --> CourierAPI
    P46 --> P47
    P47 --> EmailSys
    P47 --> P48
    P48 --> D4
```

---

## üë• Use Case Diagram

### Complete System Use Cases

```mermaid
graph TB
    subgraph "Actors"
        Customer[üë§ Customer<br/>Buyer Role]
        Admin[üë®‚Äçüíº Admin<br/>Admin Role]
        Staff[üë©‚Äçüíº Staff<br/>Staff Role]
        PaymentGW[üí≥ Payment Gateway]
        CourierSys[üöö Courier System]
    end
    
    subgraph "Customer Use Cases"
        UC1[Browse Products & Categories]
        UC2[Search Products]
        UC3[View Product Details]
        UC4[Manage Shopping Cart]
        UC5[User Registration & Login]
        UC6[Manage User Profile]
        UC7[Checkout & Payment]
        UC8[Track Orders]
        UC9[View Order History]
        UC10[Switch Light/Dark Theme]
        UC11[Chat with Support]
        UC12[Rate & Review Products]
    end
    
    subgraph "Admin Use Cases"
        UC13[Manage Products & Categories]
        UC14[Upload Product Images]
        UC15[Manage Users & Roles]
        UC16[Process Orders]
        UC17[Update Order Status]
        UC18[Generate Shipping Labels]
        UC19[View Analytics & Reports]
        UC20[Export Sales Data]
        UC21[Manage Suppliers]
        UC22[Manage Payment Config]
        UC23[Manage Shipping Services]
        UC24[Configure Store Profile]
        UC25[Handle Chat Support]
        UC26[Inventory Management]
        UC27[Restock Orders]
    end
    
    subgraph "Staff Use Cases"
        UC28[View Orders]
        UC29[Update Order Status]
        UC30[Print Shipping Labels]
        UC31[View Basic Analytics]
        UC32[Handle Customer Chat]
    end
    
    subgraph "System Integration"
        UC33[Process Payment]
        UC34[Send Payment Notifications]
        UC35[Calculate Shipping Cost]
        UC36[Track Package Status]
        UC37[Send Email Notifications]
    end
    
    %% Customer connections
    Customer --> UC1
    Customer --> UC2
    Customer --> UC3
    Customer --> UC4
    Customer --> UC5
    Customer --> UC6
    Customer --> UC7
    Customer --> UC8
    Customer --> UC9
    Customer --> UC10
    Customer --> UC11
    Customer --> UC12
    
    %% Admin connections
    Admin --> UC13
    Admin --> UC14
    Admin --> UC15
    Admin --> UC16
    Admin --> UC17
    Admin --> UC18
    Admin --> UC19
    Admin --> UC20
    Admin --> UC21
    Admin --> UC22
    Admin --> UC23
    Admin --> UC24
    Admin --> UC25
    Admin --> UC26
    Admin --> UC27
    
    %% Staff connections  
    Staff --> UC28
    Staff --> UC29
    Staff --> UC30
    Staff --> UC31
    Staff --> UC32
    
    %% External system connections
    UC7 --> UC33
    PaymentGW --> UC34
    UC7 --> UC35
    CourierSys --> UC36
    UC17 --> UC37
    
    %% Use case dependencies
    UC4 --> UC7
    UC7 --> UC8
    UC33 --> UC16
    UC16 --> UC17
    UC17 --> UC18
```

---

## üõçÔ∏è Customer Journey Flowchart

### Complete Customer Experience Flow

```mermaid
flowchart TD
    Start([üë§ Customer Arrives])
    
    %% Initial Landing
    Landing{Browse Homepage}
    Register[üìù Register New Account]
    Login[üîê Login Existing Account]
    GuestBrowse[üëÅÔ∏è Browse as Guest]
    
    %% Product Discovery
    SearchProduct[üîç Search Products]
    BrowseCategory[üìÇ Browse by Category]
    ViewFeatured[‚≠ê View Featured Products]
    
    %% Product Selection
    ProductDetail[üì± View Product Details]
    CheckStock{Stock Available?}
    OutOfStock[‚ùå Out of Stock Notice]
    AddToCart[üõí Add to Cart]
    ContinueShopping{Continue Shopping?}
    
    %% Cart Management
    ViewCart[üõí View Shopping Cart]
    UpdateCart[‚úèÔ∏è Update Quantities]
    RemoveItems[üóëÔ∏è Remove Items]
    CartEmpty{Cart Empty?}
    
    %% Checkout Process
    ProceedCheckout[üí≥ Proceed to Checkout]
    CheckProfile{Profile Complete?}
    UpdateProfile[üìã Update Profile Info]
    SelectShipping[üöö Select Shipping Method]
    ReviewOrder[üìã Review Order Details]
    SelectPayment[üí∞ Select Payment Method]
    
    %% Payment Processing
    ProcessPayment[‚è≥ Process Payment]
    PaymentSuccess{Payment Success?}
    PaymentFailed[‚ùå Payment Failed]
    RetryPayment{Retry Payment?}
    
    %% Order Completion
    OrderConfirm[‚úÖ Order Confirmation]
    ReceiveEmail[üìß Confirmation Email]
    TrackOrder[üì¶ Track Order Status]
    
    %% Post-Purchase
    OrderDelivered{Order Delivered?}
    RateReview[‚≠ê Rate & Review]
    ContactSupport[üí¨ Contact Support]
    
    %% Chat Support (Available Throughout)
    ChatSupport[üí¨ Live Chat Support]
    
    End([üéâ Customer Journey Complete])
    
    %% Flow connections
    Start --> Landing
    
    Landing --> Register
    Landing --> Login
    Landing --> GuestBrowse
    
    Register --> SearchProduct
    Login --> SearchProduct
    GuestBrowse --> SearchProduct
    
    SearchProduct --> ProductDetail
    BrowseCategory --> ProductDetail
    ViewFeatured --> ProductDetail
    
    ProductDetail --> CheckStock
    CheckStock -->|‚ùå No| OutOfStock
    CheckStock -->|‚úÖ Yes| AddToCart
    OutOfStock --> ContinueShopping
    
    AddToCart --> ContinueShopping
    ContinueShopping -->|Yes| SearchProduct
    ContinueShopping -->|No| ViewCart
    
    ViewCart --> UpdateCart
    ViewCart --> RemoveItems
    ViewCart --> ProceedCheckout
    UpdateCart --> CartEmpty
    RemoveItems --> CartEmpty
    
    CartEmpty -->|Yes| SearchProduct
    CartEmpty -->|No| ViewCart
    
    ProceedCheckout --> CheckProfile
    CheckProfile -->|‚ùå Incomplete| UpdateProfile
    CheckProfile -->|‚úÖ Complete| SelectShipping
    UpdateProfile --> SelectShipping
    
    SelectShipping --> ReviewOrder
    ReviewOrder --> SelectPayment
    SelectPayment --> ProcessPayment
    
    ProcessPayment --> PaymentSuccess
    PaymentSuccess -->|‚ùå Failed| PaymentFailed
    PaymentSuccess -->|‚úÖ Success| OrderConfirm
    
    PaymentFailed --> RetryPayment
    RetryPayment -->|Yes| SelectPayment
    RetryPayment -->|No| ViewCart
    
    OrderConfirm --> ReceiveEmail
    ReceiveEmail --> TrackOrder
    
    TrackOrder --> OrderDelivered
    OrderDelivered -->|‚ùå No| TrackOrder
    OrderDelivered -->|‚úÖ Yes| RateReview
    
    RateReview --> End
    ContactSupport --> End
    
    %% Chat support can be accessed from anywhere
    Landing -.->|Help Needed| ChatSupport
    ProductDetail -.->|Product Questions| ChatSupport
    ViewCart -.->|Cart Issues| ChatSupport
    ProceedCheckout -.->|Checkout Help| ChatSupport
    PaymentFailed -.->|Payment Issues| ChatSupport
    TrackOrder -.->|Order Questions| ChatSupport
    
    ChatSupport -.-> End
    
    %% Theme switching available throughout
    Landing -.->|üåì Theme Toggle| Landing
```

### Customer State Transitions

```mermaid
stateDiagram-v2
    [*] --> Anonymous
    Anonymous --> Registered : Register
    Anonymous --> LoggedIn : Login
    Anonymous --> Browsing : Browse as Guest
    
    Registered --> LoggedIn : Auto-login
    LoggedIn --> Browsing : Start Shopping
    
    state Browsing {
        [*] --> ViewingProducts
        ViewingProducts --> SearchingProducts : Search
        SearchingProducts --> ViewingProducts : View Results
        ViewingProducts --> ViewingProductDetail : Select Product
        ViewingProductDetail --> ViewingProducts : Back to Catalog
    }
    
    Browsing --> Shopping : Add to Cart
    
    state Shopping {
        [*] --> ManagingCart
        ManagingCart --> ReviewingCart : View Cart
        ReviewingCart --> ManagingCart : Update Items
        ReviewingCart --> CheckingOut : Proceed to Checkout
    }
    
    Shopping --> Browsing : Continue Shopping
    Shopping --> CheckingOut : Ready to Purchase
    
    state CheckingOut {
        [*] --> ValidatingProfile
        ValidatingProfile --> SelectingShipping : Profile OK
        ValidatingProfile --> UpdatingProfile : Profile Incomplete
        UpdatingProfile --> SelectingShipping : Profile Updated
        SelectingShipping --> ReviewingOrder : Shipping Selected
        ReviewingOrder --> ProcessingPayment : Confirm Order
    }
    
    state ProcessingPayment {
        [*] --> PaymentPending
        PaymentPending --> PaymentSuccess : Payment Approved
        PaymentPending --> PaymentFailed : Payment Declined
        PaymentFailed --> PaymentRetry : Retry
        PaymentRetry --> PaymentPending : New Payment Attempt
    }
    
    CheckingOut --> ProcessingPayment : Submit Payment
    ProcessingPayment --> OrderConfirmed : Payment Success
    ProcessingPayment --> Shopping : Payment Failed (Retry Later)
    
    OrderConfirmed --> TrackingOrder : Order Placed
    
    state TrackingOrder {
        [*] --> OrderPending
        OrderPending --> OrderPaid : Payment Confirmed
        OrderPaid --> OrderShipped : Shipped
        OrderShipped --> OrderDelivered : Delivered
        OrderDelivered --> OrderCompleted : Customer Satisfied
    }
    
    TrackingOrder --> [*] : Order Complete
    LoggedIn --> [*] : Logout
    Anonymous --> [*] : Leave Site
```

---

## üë®‚Äçüíº Admin Workflow Flowchart

### Admin Dashboard Flow

```mermaid
flowchart TD
    AdminLogin[üîê Admin Login]
    Dashboard[üìä Admin Dashboard]
    
    subgraph "Main Admin Functions"
        ProductMgmt[üì¶ Product Management]
        OrderMgmt[üìã Order Management]
        UserMgmt[üë• User Management]
        Analytics[üìà Analytics & Reports]
        Settings[‚öôÔ∏è System Settings]
        ChatMgmt[üí¨ Chat Management]
        InventoryMgmt[üì¶ Inventory Management]
    end
    
    AdminLogin --> Dashboard
    Dashboard --> ProductMgmt
    Dashboard --> OrderMgmt
    Dashboard --> UserMgmt
    Dashboard --> Analytics
    Dashboard --> Settings
    Dashboard --> ChatMgmt
    Dashboard --> InventoryMgmt
```

### Product Management Flow

```mermaid
flowchart TD
    ProductMgmt[üì¶ Product Management]
    ViewProducts[üëÅÔ∏è View All Products]
    
    subgraph "Product Actions"
        CreateProduct[‚ûï Create New Product]
        EditProduct[‚úèÔ∏è Edit Product]
        DeleteProduct[üóëÔ∏è Delete Product]
        ManageImages[üñºÔ∏è Manage Images]
        SetFeatured[‚≠ê Set Featured]
        UpdateStock[üì¶ Update Stock]
    end
    
    subgraph "Create Product Flow"
        FillBasicInfo[üìù Fill Basic Info]
        SelectCategory[üìÇ Select Category]
        SetPricing[üí∞ Set Pricing]
        AddImages[üñºÔ∏è Add Product Images]
        SetDimensions[üìè Set Dimensions/Weight]
        SetStockLevels[üì¶ Set Stock Levels]
        SetSupplier[üè¢ Set Supplier Info]
        SaveProduct[üíæ Save Product]
    end
    
    subgraph "Image Management"
        UploadImages[üì§ Upload New Images]
        SelectThumbnail[üñºÔ∏è Select Thumbnail]
        ReorderImages[üîÑ Reorder Images]
        DeleteImages[üóëÔ∏è Delete Images]
        CompressImages[üóúÔ∏è Auto Compress]
    end
    
    subgraph "Stock Management"
        CheckStockLevels[üìä Check Stock Levels]
        LowStockAlert[‚ö†Ô∏è Low Stock Alert]
        CriticalStockAlert[üö® Critical Stock Alert]
        CreateRestockOrder[üìã Create Restock Order]
        UpdateMinimumStock[üì¶ Update Minimum Stock]
    end
    
    ProductMgmt --> ViewProducts
    ViewProducts --> CreateProduct
    ViewProducts --> EditProduct
    ViewProducts --> DeleteProduct
    ViewProducts --> ManageImages
    ViewProducts --> SetFeatured
    ViewProducts --> UpdateStock
    
    CreateProduct --> FillBasicInfo
    FillBasicInfo --> SelectCategory
    SelectCategory --> SetPricing
    SetPricing --> AddImages
    AddImages --> SetDimensions
    SetDimensions --> SetStockLevels
    SetStockLevels --> SetSupplier
    SetSupplier --> SaveProduct
    
    ManageImages --> UploadImages
    ManageImages --> SelectThumbnail
    ManageImages --> ReorderImages
    ManageImages --> DeleteImages
    UploadImages --> CompressImages
    
    UpdateStock --> CheckStockLevels
    CheckStockLevels --> LowStockAlert
    CheckStockLevels --> CriticalStockAlert
    LowStockAlert --> CreateRestockOrder
    CriticalStockAlert --> CreateRestockOrder
    CheckStockLevels --> UpdateMinimumStock
    
    SaveProduct --> ViewProducts
    CreateRestockOrder --> ViewProducts
```

### Order Management Flow

```mermaid
flowchart TD
    OrderMgmt[üìã Order Management]
    ViewOrders[üëÅÔ∏è View All Orders]
    
    subgraph "Order Statuses"
        PendingOrders[‚è≥ Pending Orders]
        PaidOrders[üí∞ Paid Orders]
        ShippedOrders[üöö Shipped Orders]
        DeliveredOrders[‚úÖ Delivered Orders]
        CancelledOrders[‚ùå Cancelled Orders]
    end
    
    subgraph "Order Actions"
        ViewOrderDetails[üîç View Order Details]
        UpdateOrderStatus[üîÑ Update Status]
        PrintShippingLabel[üè∑Ô∏è Print Shipping Label]
        AddTrackingNumber[üìç Add Tracking Number]
        ProcessRefund[üí∏ Process Refund]
        ContactCustomer[üìß Contact Customer]
        GenerateInvoice[üìÑ Generate Invoice]
    end
    
    subgraph "Shipping Process"
        ValidateAddress[üìç Validate Address]
        SelectCourier[üöö Select Courier Service]
        CalculateShipping[üí∞ Calculate Shipping Cost]
        GenerateLabel[üè∑Ô∏è Generate Shipping Label]
        CreateTracking[üìç Create Tracking Number]
        NotifyCustomer[üìß Notify Customer]
        UpdateStatus[üîÑ Update to Shipped]
    end
    
    subgraph "Quick Actions"
        QuickShip[üöÄ Quick Ship]
        BulkStatusUpdate[üì¶ Bulk Status Update]
        ExportOrders[üì§ Export Orders]
        PrintBatch[üñ®Ô∏è Print Batch Labels]
    end
    
    OrderMgmt --> ViewOrders
    ViewOrders --> PendingOrders
    ViewOrders --> PaidOrders
    ViewOrders --> ShippedOrders
    ViewOrders --> DeliveredOrders
    ViewOrders --> CancelledOrders
    
    ViewOrders --> ViewOrderDetails
    ViewOrderDetails --> UpdateOrderStatus
    ViewOrderDetails --> PrintShippingLabel
    ViewOrderDetails --> AddTrackingNumber
    ViewOrderDetails --> ProcessRefund
    ViewOrderDetails --> ContactCustomer
    ViewOrderDetails --> GenerateInvoice
    
    PaidOrders --> ValidateAddress
    ValidateAddress --> SelectCourier
    SelectCourier --> CalculateShipping
    CalculateShipping --> GenerateLabel
    GenerateLabel --> CreateTracking
    CreateTracking --> NotifyCustomer
    NotifyCustomer --> UpdateStatus
    
    ViewOrders --> QuickShip
    ViewOrders --> BulkStatusUpdate
    ViewOrders --> ExportOrders
    ViewOrders --> PrintBatch
```

---

## üìã Order Processing Flowchart

### Complete Order Lifecycle

```mermaid
flowchart TD
    OrderReceived([üìù New Order Received])
    
    subgraph "Order Validation"
        ValidateOrder[üîç Validate Order Data]
        CheckCustomer[üë§ Verify Customer Info]
        ValidateItems[üì¶ Validate Order Items]
        OrderValid{Order Valid?}
        RejectOrder[‚ùå Reject Order]
        SendRejectionEmail[üìß Send Rejection Email]
    end
    
    subgraph "Stock Verification"
        CheckStock[üì¶ Check Stock Availability]
        StockAvailable{All Items Available?}
        ReserveStock[üìå Reserve Stock Items]
        PartialStock[‚ö†Ô∏è Partial Stock Available]
        BackorderItems[üìã Create Backorder]
        NotifyStockIssue[üìß Notify Stock Issues]
    end
    
    subgraph "Payment Processing"
        ValidatePayment[üí≥ Validate Payment Method]
        ProcessPayment[‚è≥ Process Payment]
        PaymentSuccess{Payment Successful?}
        PaymentFailed[‚ùå Payment Failed]
        NotifyPaymentFailure[üìß Payment Failure Notice]
        ConfirmPayment[‚úÖ Confirm Payment]
        UpdateOrderStatus1[üìä Status: Paid]
    end
    
    subgraph "Order Fulfillment"
        GenerateInvoice[üìÑ Generate Invoice]
        AllocateInventory[üì¶ Allocate Inventory]
        PreparePackaging[üì¶ Prepare for Packaging]
        PackageOrder[üì¶ Package Items]
        WeighPackage[‚öñÔ∏è Weigh Package]
        SelectCourier[üöö Select Courier Service]
        GenerateShippingLabel[üè∑Ô∏è Generate Shipping Label]
        CreateTrackingNumber[üìç Create Tracking Number]
        UpdateOrderStatus2[üìä Status: Shipped]
    end
    
    subgraph "Shipping & Delivery"
        HandoverToCourier[üöö Handover to Courier]
        NotifyCustomerShipped[üìß Shipping Notification]
        TrackPackage[üìç Track Package Movement]
        UpdateDeliveryStatus[üîÑ Update Delivery Status]
        PackageDelivered{Package Delivered?}
        DeliveryConfirmed[‚úÖ Delivery Confirmed]
        UpdateOrderStatus3[üìä Status: Delivered]
        DeliveryFailed[‚ùå Delivery Failed]
        RetryDelivery[üîÑ Schedule Retry]
        ContactCustomerDelivery[üìß Contact Customer]
    end
    
    subgraph "Post-Delivery"
        SendCompletionEmail[üìß Order Completion Email]
        RequestFeedback[‚≠ê Request Customer Feedback]
        ArchiveOrder[üìÅ Archive Order]
        UpdateAnalytics[üìä Update Sales Analytics]
        OrderComplete[‚úÖ Order Complete]
    end
    
    subgraph "Exception Handling"
        OrderCancelled[‚ùå Order Cancelled]
        ProcessRefund[üí∏ Process Refund]
        RestoreStock[üì¶ Restore Stock Levels]
        NotifyCancellation[üìß Cancellation Notice]
    end
    
    OrderReceived --> ValidateOrder
    ValidateOrder --> CheckCustomer
    CheckCustomer --> ValidateItems
    ValidateItems --> OrderValid
    
    OrderValid -->|‚ùå Invalid| RejectOrder
    RejectOrder --> SendRejectionEmail
    SendRejectionEmail --> OrderComplete
    
    OrderValid -->|‚úÖ Valid| CheckStock
    CheckStock --> StockAvailable
    
    StockAvailable -->|‚ùå Insufficient| PartialStock
    PartialStock --> BackorderItems
    BackorderItems --> NotifyStockIssue
    NotifyStockIssue --> OrderCancelled
    
    StockAvailable -->|‚úÖ Available| ReserveStock
    ReserveStock --> ValidatePayment
    ValidatePayment --> ProcessPayment
    ProcessPayment --> PaymentSuccess
    
    PaymentSuccess -->|‚ùå Failed| PaymentFailed
    PaymentFailed --> NotifyPaymentFailure
    NotifyPaymentFailure --> OrderCancelled
    
    PaymentSuccess -->|‚úÖ Success| ConfirmPayment
    ConfirmPayment --> UpdateOrderStatus1
    UpdateOrderStatus1 --> GenerateInvoice
    
    GenerateInvoice --> AllocateInventory
    AllocateInventory --> PreparePackaging
    PreparePackaging --> PackageOrder
    PackageOrder --> WeighPackage
    WeighPackage --> SelectCourier
    SelectCourier --> GenerateShippingLabel
    GenerateShippingLabel --> CreateTrackingNumber
    CreateTrackingNumber --> UpdateOrderStatus2
    
    UpdateOrderStatus2 --> HandoverToCourier
    HandoverToCourier --> NotifyCustomerShipped
    NotifyCustomerShipped --> TrackPackage
    TrackPackage --> UpdateDeliveryStatus
    UpdateDeliveryStatus --> PackageDelivered
    
    PackageDelivered -->|‚ùå Failed| DeliveryFailed
    DeliveryFailed --> RetryDelivery
    RetryDelivery --> ContactCustomerDelivery
    ContactCustomerDelivery --> TrackPackage
    
    PackageDelivered -->|‚úÖ Success| DeliveryConfirmed
    DeliveryConfirmed --> UpdateOrderStatus3
    UpdateOrderStatus3 --> SendCompletionEmail
    SendCompletionEmail --> RequestFeedback
    RequestFeedback --> ArchiveOrder
    ArchiveOrder --> UpdateAnalytics
    UpdateAnalytics --> OrderComplete
    
    OrderCancelled --> ProcessRefund
    ProcessRefund --> RestoreStock
    RestoreStock --> NotifyCancellation
    NotifyCancellation --> OrderComplete
    
    OrderComplete --> End([üèÅ Process End])
```

---

## üí≥ Payment Processing Flowchart

### Multi-Gateway Payment Flow

```mermaid
flowchart TD
    InitiatePayment([üí≥ Initiate Payment])
    
    subgraph "Payment Configuration"
        GetActiveConfig[‚öôÔ∏è Get Active Payment Config]
        ConfigExists{Config Available?}
        NoConfigError[‚ùå No Payment Config Available]
        SelectGateway[üéØ Select Payment Gateway]
        GatewayType{Gateway Type?}
    end
    
    subgraph "Stripe Payment Flow"
        StripeConfig[üü¶ Stripe Configuration]
        CreateStripeSession[üìù Create Checkout Session]
        BuildLineItems[üìã Build Line Items]
        AddShipping[üöö Add Shipping Cost]
        CreateSession[‚ú® Create Stripe Session]
        RedirectToStripe[üîó Redirect to Stripe]
        StripeCallback[‚Ü©Ô∏è Stripe Callback]
        StripeWebhook[üîî Stripe Webhook]
    end
    
    subgraph "Midtrans Payment Flow"
        MidtransConfig[üü® Midtrans Configuration]
        GenerateOrderID[üÜî Generate Order ID]
        BuildItemDetails[üìã Build Item Details]
        SetCustomerDetails[üë§ Set Customer Details]
        CreateTransaction[üíº Create Snap Transaction]
        GetSnapToken[üé´ Get Snap Token]
        RedirectToMidtrans[üîó Redirect to Midtrans]
        MidtransCallback[‚Ü©Ô∏è Midtrans Callback]
        MidtransWebhook[üîî Midtrans Notification]
    end
    
    subgraph "Payment Verification"
        VerifyPayment[üîç Verify Payment Status]
        UpdateTransactionRecord[üìù Update Transaction Record]
        PaymentSuccessful{Payment Successful?}
        HandleSuccess[‚úÖ Handle Success]
        HandleFailure[‚ùå Handle Failure]
        UpdateOrderStatus[üìä Update Order Status]
    end
    
    subgraph "Post-Payment Processing"
        ClearCart[üõí Clear Shopping Cart]
        CreateOrderItems[üì¶ Create Order Items]
        UpdateInventory[üì¶ Update Inventory]
        SendConfirmation[üìß Send Confirmation Email]
        RedirectToSuccess[üéâ Redirect to Success Page]
        LogTransaction[üìù Log Transaction Details]
    end
    
    subgraph "Error Handling"
        PaymentError[‚ö†Ô∏è Payment Error]
        LogError[üìù Log Error Details]
        NotifyCustomer[üìß Notify Customer]
        ReturnToCart[üõí Return to Cart]
        OfferRetry[üîÑ Offer Payment Retry]
    end
    
    InitiatePayment --> GetActiveConfig
    GetActiveConfig --> ConfigExists
    ConfigExists -->|‚ùå No| NoConfigError
    ConfigExists -->|‚úÖ Yes| SelectGateway
    SelectGateway --> GatewayType
    
    %% Stripe Flow
    GatewayType -->|Stripe| StripeConfig
    StripeConfig --> CreateStripeSession
    CreateStripeSession --> BuildLineItems
    BuildLineItems --> AddShipping
    AddShipping --> CreateSession
    CreateSession --> RedirectToStripe
    RedirectToStripe --> StripeCallback
    StripeCallback --> VerifyPayment
    
    %% Midtrans Flow
    GatewayType -->|Midtrans| MidtransConfig
    MidtransConfig --> GenerateOrderID
    GenerateOrderID --> BuildItemDetails
    BuildItemDetails --> SetCustomerDetails
    SetCustomerDetails --> CreateTransaction
    CreateTransaction --> GetSnapToken
    GetSnapToken --> RedirectToMidtrans
    RedirectToMidtrans --> MidtransCallback
    MidtransCallback --> VerifyPayment
    
    %% Webhook Handling
    StripeWebhook --> UpdateTransactionRecord
    MidtransWebhook --> UpdateTransactionRecord
    
    %% Payment Verification
    VerifyPayment --> UpdateTransactionRecord
    UpdateTransactionRecord --> PaymentSuccessful
    
    PaymentSuccessful -->|‚úÖ Success| HandleSuccess
    PaymentSuccessful -->|‚ùå Failed| HandleFailure
    
    HandleSuccess --> UpdateOrderStatus
    UpdateOrderStatus --> ClearCart
    ClearCart --> CreateOrderItems
    CreateOrderItems --> UpdateInventory
    UpdateInventory --> SendConfirmation
    SendConfirmation --> RedirectToSuccess
    RedirectToSuccess --> LogTransaction
    
    HandleFailure --> PaymentError
    PaymentError --> LogError
    LogError --> NotifyCustomer
    NotifyCustomer --> ReturnToCart
    ReturnToCart --> OfferRetry
    
    NoConfigError --> PaymentError
    OfferRetry --> SelectGateway
    
    LogTransaction --> End([üèÅ Payment Complete])
    OfferRetry --> End
```

### Payment Status State Machine

```mermaid
stateDiagram-v2
    [*] --> PaymentInitiated
    PaymentInitiated --> PaymentPending : Create Session
    PaymentPending --> PaymentProcessing : User Submits
    
    state PaymentProcessing {
        [*] --> GatewayValidation
        GatewayValidation --> FraudCheck : Valid
        GatewayValidation --> ValidationFailed : Invalid
        FraudCheck --> AuthorizationCheck : Pass
        FraudCheck --> FraudDetected : Fail
        AuthorizationCheck --> PaymentApproved : Approved
        AuthorizationCheck --> InsufficientFunds : Declined
    }
    
    PaymentProcessing --> PaymentCompleted : Success
    PaymentProcessing --> PaymentFailed : Error
    PaymentProcessing --> PaymentCancelled : User Cancel
    
    PaymentFailed --> PaymentRetry : Retry
    PaymentRetry --> PaymentPending : New Attempt
    
    PaymentCompleted --> [*]
    PaymentFailed --> [*]
    PaymentCancelled --> [*]
```

---

## üîê Authentication Flow

### User Authentication Process

```mermaid
flowchart TD
    UserAccess[üë§ User Access Request]
    CheckAuth{Authenticated?}
    
    subgraph "Login Process"
        LoginForm[üìù Login Form]
        ValidateCredentials[üîç Validate Credentials]
        CheckPassword{Password Correct?}
        CheckUserActive{User Active?}
        CreateSession[üìã Create User Session]
        SetLoginCookies[üç™ Set Login Cookies]
        LoginSuccess[‚úÖ Login Success]
        LoginFailed[‚ùå Login Failed]
    end
    
    subgraph "Registration Process"
        RegisterForm[üìù Registration Form]
        ValidateInput[üîç Validate Input Data]
        CheckEmailExists{Email Exists?}
        HashPassword[üîí Hash Password]
        CreateUser[üë§ Create User Record]
        SendWelcomeEmail[üìß Send Welcome Email]
        AutoLogin[üîê Auto Login New User]
        RegistrationSuccess[‚úÖ Registration Success]
        RegistrationFailed[‚ùå Registration Failed]
    end
    
    subgraph "Session Management"
        CheckSession[üîç Check Session Validity]
        SessionValid{Session Valid?}
        RefreshSession[üîÑ Refresh Session]
        InvalidateSession[‚ùå Invalidate Session]
        RequireReauth[üîê Require Re-authentication]
    end
    
    subgraph "Role-Based Access"
        CheckRole[üë§ Check User Role]
        RoleType{Role Type?}
        AdminAccess[üë®‚Äçüíº Admin Access]
        StaffAccess[üë©‚Äçüíº Staff Access]
        BuyerAccess[üë§ Buyer Access]
        AccessDenied[‚ùå Access Denied]
    end
    
    subgraph "Security Features"
        CSRFProtection[üõ°Ô∏è CSRF Token Validation]
        PasswordHashing[üîí Secure Password Storage]
        SessionSecurity[üîê Secure Session Cookies]
        HTTPSEnforcement[üîí HTTPS Enforcement]
    end
    
    UserAccess --> CheckAuth
    CheckAuth -->|‚ùå No| LoginForm
    CheckAuth -->|‚úÖ Yes| CheckSession
    
    LoginForm --> ValidateCredentials
    ValidateCredentials --> CheckPassword
    CheckPassword -->|‚ùå Invalid| LoginFailed
    CheckPassword -->|‚úÖ Valid| CheckUserActive
    CheckUserActive -->|‚ùå Inactive| LoginFailed
    CheckUserActive -->|‚úÖ Active| CreateSession
    CreateSession --> SetLoginCookies
    SetLoginCookies --> LoginSuccess
    
    LoginForm -.->|New User| RegisterForm
    RegisterForm --> ValidateInput
    ValidateInput --> CheckEmailExists
    CheckEmailExists -->|‚úÖ Exists| RegistrationFailed
    CheckEmailExists -->|‚ùå New| HashPassword
    HashPassword --> CreateUser
    CreateUser --> SendWelcomeEmail
    SendWelcomeEmail --> AutoLogin
    AutoLogin --> RegistrationSuccess
    
    CheckSession --> SessionValid
    SessionValid -->|‚úÖ Valid| CheckRole
    SessionValid -->|‚ùå Invalid| RequireReauth
    RequireReauth --> LoginForm
    
    CheckRole --> RoleType
    RoleType -->|Admin| AdminAccess
    RoleType -->|Staff| StaffAccess  
    RoleType -->|Buyer| BuyerAccess
    RoleType -->|Invalid| AccessDenied
    
    LoginSuccess --> CheckRole
    RegistrationSuccess --> BuyerAccess
    
    %% Security Implementations
    ValidateCredentials -.-> CSRFProtection
    CreateUser -.-> PasswordHashing
    CreateSession -.-> SessionSecurity
    UserAccess -.-> HTTPSEnforcement
    
    AdminAccess --> AuthorizedAccess[‚úÖ Authorized Access]
    StaffAccess --> AuthorizedAccess
    BuyerAccess --> AuthorizedAccess
    
    LoginFailed --> LoginForm
    RegistrationFailed --> RegisterForm
    AccessDenied --> LoginForm
    
    AuthorizedAccess --> End([üéØ Access Granted])
```

---

## üõí Cart Management Flow

### Shopping Cart Operations

```mermaid
flowchart TD
    CartAccess[üõí Access Cart]
    CheckUser{User Logged In?}
    RequireLogin[üîê Require Login]
    
    subgraph "Add to Cart Flow"
        SelectProduct[üì± Select Product]
        CheckProductStock{Stock Available?}
        OutOfStock[‚ùå Out of Stock]
        ChooseQuantity[üî¢ Choose Quantity]
        ValidateQuantity{Quantity Valid?}
        AddToCart[‚ûï Add to Cart]
        CheckExistingItem{Item in Cart?}
        UpdateQuantity[üîÑ Update Quantity]
        CreateNewItem[‚ú® Create New Cart Item]
        ShowSuccess[‚úÖ Added Successfully]
    end
    
    subgraph "View Cart Flow"
        LoadCartItems[üìã Load Cart Items]
        CheckCartEmpty{Cart Empty?}
        ShowEmptyCart[üì≠ Show Empty Cart]
        DisplayCartItems[üì¶ Display Cart Items]
        CalculateSubtotal[üí∞ Calculate Subtotal]
        ShowCartSummary[üìä Show Cart Summary]
    end
    
    subgraph "Update Cart Flow"
        ModifyQuantity[‚úèÔ∏è Modify Quantity]
        NewQuantityValid{Quantity > 0?}
        RemoveItem[üóëÔ∏è Remove Item]
        UpdateCartItem[üîÑ Update Cart Item]
        RecalculateTotal[üí∞ Recalculate Total]
        UpdateDisplay[üîÑ Update Display]
    end
    
    subgraph "Remove from Cart Flow"
        ConfirmRemoval{Confirm Remove?}
        DeleteCartItem[üóëÔ∏è Delete Cart Item]
        ShowRemovalMessage[üìù Show Removal Message]
    end
    
    subgraph "Clear Cart Flow"
        ConfirmClearAll{Clear All Items?}
        DeleteAllItems[üóëÔ∏è Delete All Items]
        ShowClearMessage[üìù Cart Cleared Message]
    end
    
    subgraph "Checkout Preparation"
        ValidateCartItems[üîç Validate Cart Items]
        CheckAllStock{All Items Available?}
        StockIssues[‚ö†Ô∏è Stock Issues Found]
        UpdateStockInfo[üì¶ Update Stock Info]
        PrepareCheckout[‚úÖ Prepare for Checkout]
    end
    
    CartAccess --> CheckUser
    CheckUser -->|‚ùå No| RequireLogin
    CheckUser -->|‚úÖ Yes| LoadCartItems
    
    SelectProduct --> CheckProductStock
    CheckProductStock -->|‚ùå No| OutOfStock
    CheckProductStock -->|‚úÖ Yes| ChooseQuantity
    ChooseQuantity --> ValidateQuantity
    ValidateQuantity -->|‚ùå Invalid| ChooseQuantity
    ValidateQuantity -->|‚úÖ Valid| AddToCart
    AddToCart --> CheckExistingItem
    CheckExistingItem -->|‚úÖ Exists| UpdateQuantity
    CheckExistingItem -->|‚ùå New| CreateNewItem
    UpdateQuantity --> ShowSuccess
    CreateNewItem --> ShowSuccess
    
    LoadCartItems --> CheckCartEmpty
    CheckCartEmpty -->|‚úÖ Empty| ShowEmptyCart
    CheckCartEmpty -->|‚ùå Has Items| DisplayCartItems
    DisplayCartItems --> CalculateSubtotal
    CalculateSubtotal --> ShowCartSummary
    
    ShowCartSummary --> ModifyQuantity
    ModifyQuantity --> NewQuantityValid
    NewQuantityValid -->|‚ùå Zero| RemoveItem
    NewQuantityValid -->|‚úÖ Positive| UpdateCartItem
    UpdateCartItem --> RecalculateTotal
    RecalculateTotal --> UpdateDisplay
    
    RemoveItem --> ConfirmRemoval
    ConfirmRemoval -->|‚úÖ Yes| DeleteCartItem
    ConfirmRemoval -->|‚ùå No| ShowCartSummary
    DeleteCartItem --> ShowRemovalMessage
    ShowRemovalMessage --> RecalculateTotal
    
    ShowCartSummary --> ConfirmClearAll
    ConfirmClearAll -->|‚úÖ Yes| DeleteAllItems
    ConfirmClearAll -->|‚ùå No| ShowCartSummary
    DeleteAllItems --> ShowClearMessage
    
    ShowCartSummary --> ValidateCartItems
    ValidateCartItems --> CheckAllStock
    CheckAllStock -->|‚ùå Issues| StockIssues
    CheckAllStock -->|‚úÖ Available| PrepareCheckout
    StockIssues --> UpdateStockInfo
    UpdateStockInfo --> ShowCartSummary
    
    RequireLogin --> End([üîö Login Required])
    OutOfStock --> End
    ShowSuccess --> End
    ShowEmptyCart --> End  
    UpdateDisplay --> End
    ShowClearMessage --> End
    PrepareCheckout --> CheckoutFlow[üí≥ Proceed to Checkout]
    
    CheckoutFlow --> End([üéØ Continue to Checkout])
```

---

## üì¶ Inventory Management Flow

### Stock Management System

```mermaid
flowchart TD
    InventoryDashboard[üì¶ Inventory Dashboard]
    
    subgraph "Stock Monitoring"
        ViewAllProducts[üëÅÔ∏è View All Products]
        CheckStockLevels[üìä Check Stock Levels]
        StockStatus{Stock Status?}
        AdequateStock[‚úÖ Adequate Stock]
        LowStock[‚ö†Ô∏è Low Stock Alert]
        CriticalStock[üö® Critical Stock Alert]
        OutOfStock[‚ùå Out of Stock]
    end
    
    subgraph "Stock Alerts"
        GenerateAlerts[üö® Generate Stock Alerts]
        NotifyManagement[üìß Notify Management]
        CreateAlertReport[üìã Create Alert Report]
        ScheduleRestock[üìÖ Schedule Restock]
    end
    
    subgraph "Restock Management"
        CreateRestockOrder[üìù Create Restock Order]
        SelectSupplier[üè¢ Select Supplier]
        AddRestockItems[üì¶ Add Items to Restock]
        SetQuantities[üî¢ Set Quantities]
        SetUnitCosts[üí∞ Set Unit Costs]
        CalculateTotal[üí∞ Calculate Total Cost]
        ReviewRestockOrder[üëÅÔ∏è Review Restock Order]
        SubmitRestockOrder[üì§ Submit to Supplier]
        TrackRestockOrder[üìç Track Restock Order]
    end
    
    subgraph "Stock Receiving"
        ReceiveShipment[üì¶ Receive Shipment]
        VerifyItems[üîç Verify Received Items]
        CheckQuantities{Quantities Match?}
        ReportDiscrepancy[‚ö†Ô∏è Report Discrepancy]
        UpdateInventory[üìä Update Inventory Levels]
        MarkRestockComplete[‚úÖ Mark Restock Complete]
        GenerateReceiptReport[üìã Generate Receipt Report]
    end
    
    subgraph "Stock Adjustments"
        ManualAdjustment[‚úèÔ∏è Manual Stock Adjustment]
        AdjustmentReason[üìù Document Reason]
        AdjustmentTypes{Adjustment Type?}
        StockIncrease[‚ûï Stock Increase]
        StockDecrease[‚ûñ Stock Decrease]
        DamageReport[üí• Damage Report]
        TheftReport[üö´ Theft Report]
        UpdateStockLevels[üìä Update Stock Levels]
        LogAdjustment[üìù Log Adjustment History]
    end
    
    subgraph "Inventory Reporting"
        GenerateStockReport[üìä Generate Stock Report]
        LowStockReport[‚ö†Ô∏è Low Stock Report]
        ValueReport[üí∞ Inventory Value Report]
        MovementReport[üîÑ Stock Movement Report]
        ExportReports[üì§ Export Reports]
    end
    
    InventoryDashboard --> ViewAllProducts
    ViewAllProducts --> CheckStockLevels
    CheckStockLevels --> StockStatus
    
    StockStatus --> AdequateStock
    StockStatus --> LowStock
    StockStatus --> CriticalStock
    StockStatus --> OutOfStock
    
    LowStock --> GenerateAlerts
    CriticalStock --> GenerateAlerts
    OutOfStock --> GenerateAlerts
    
    GenerateAlerts --> NotifyManagement
    NotifyManagement --> CreateAlertReport
    CreateAlertReport --> ScheduleRestock
    
    ScheduleRestock --> CreateRestockOrder
    CreateRestockOrder --> SelectSupplier
    SelectSupplier --> AddRestockItems
    AddRestockItems --> SetQuantities
    SetQuantities --> SetUnitCosts
    SetUnitCosts --> CalculateTotal
    CalculateTotal --> ReviewRestockOrder
    ReviewRestockOrder --> SubmitRestockOrder
    SubmitRestockOrder --> TrackRestockOrder
    
    TrackRestockOrder --> ReceiveShipment
    ReceiveShipment --> VerifyItems
    VerifyItems --> CheckQuantities
    CheckQuantities -->|‚ùå Mismatch| ReportDiscrepancy
    CheckQuantities -->|‚úÖ Match| UpdateInventory
    ReportDiscrepancy --> UpdateInventory
    UpdateInventory --> MarkRestockComplete
    MarkRestockComplete --> GenerateReceiptReport
    
    InventoryDashboard --> ManualAdjustment
    ManualAdjustment --> AdjustmentReason
    AdjustmentReason --> AdjustmentTypes
    AdjustmentTypes --> StockIncrease
    AdjustmentTypes --> StockDecrease
    AdjustmentTypes --> DamageReport
    AdjustmentTypes --> TheftReport
    StockIncrease --> UpdateStockLevels
    StockDecrease --> UpdateStockLevels
    DamageReport --> UpdateStockLevels
    TheftReport --> UpdateStockLevels
    UpdateStockLevels --> LogAdjustment
    
    InventoryDashboard --> GenerateStockReport
    GenerateStockReport --> LowStockReport
    GenerateStockReport --> ValueReport
    GenerateStockReport --> MovementReport
    LowStockReport --> ExportReports
    ValueReport --> ExportReports
    MovementReport --> ExportReports
    
    AdequateStock --> End([‚úÖ Stock Management Complete])
    GenerateReceiptReport --> End
    LogAdjustment --> End
    ExportReports --> End
```

---

## üí¨ Chat System Flow

### Real-time Chat Architecture

```mermaid
flowchart TD
    subgraph "Flask Application (Port 5000)"
        FlaskApp[üé∏ Flask Main App]
        AuthEndpoint[üîê JWT Token Generation]
        ChatProxy[üîÑ Chat API Proxy]
    end
    
    subgraph "Django Chat Service (Port 8000)"
        DjangoApp[üí¨ Django Chat Service]
        WebSocketHandler[üîå WebSocket Handler]
        ChatAPI[üì° Chat REST API]
        ChatModels[üóÉÔ∏è Chat Models]
    end
    
    subgraph "Frontend Components"
        FloatingChat[üí¨ Floating Chat Widget]
        AdminChatInterface[üë®‚Äçüíº Admin Chat Interface]
        BuyerChatInterface[üë§ Buyer Chat Interface]
    end
    
    subgraph "Database Layer"
        PostgresDB[(üìä PostgreSQL<br/>Main Database)]
        ChatDB[(üí¨ SQLite<br/>Chat Database)]
    end
    
    FlaskApp --> AuthEndpoint
    FlaskApp --> ChatProxy
    
    AuthEndpoint --> FloatingChat
    ChatProxy --> DjangoApp
    
    DjangoApp --> WebSocketHandler
    DjangoApp --> ChatAPI
    DjangoApp --> ChatModels
    
    FloatingChat --> WebSocketHandler
    AdminChatInterface --> WebSocketHandler
    BuyerChatInterface --> WebSocketHandler
    
    FloatingChat --> ChatAPI
    AdminChatInterface --> ChatAPI
    BuyerChatInterface --> ChatAPI
    
    ChatModels --> ChatDB
    FlaskApp --> PostgresDB
```

### Chat Message Flow

```mermaid
flowchart TD
    UserConnect[üë§ User Connects]
    
    subgraph "Connection Setup"
        RequestToken[üîë Request JWT Token]
        ValidateToken[üîç Validate Token]
        CreateWebSocket[üîå Create WebSocket Connection]
        JoinChatRoom[üö™ Join Chat Room]
        ConnectionEstablished[‚úÖ Connection Established]
    end
    
    subgraph "Message Sending"
        ComposeMessage[‚úèÔ∏è Compose Message]
        ValidateMessage[üîç Validate Message]
        SendMessage[üì§ Send Message]
        SaveToDatabase[üíæ Save to Database]
        BroadcastMessage[üì° Broadcast to Room]
        UpdateUI[üîÑ Update UI]
    end
    
    subgraph "Message Receiving"
        ReceiveMessage[üì• Receive Message]
        DisplayMessage[üí¨ Display Message]
        PlayNotification[üîî Play Notification]
        MarkAsRead[üëÅÔ∏è Mark as Read]
    end
    
    subgraph "Admin Features"
        ViewAllRooms[üëÅÔ∏è View All Chat Rooms]
        SearchRooms[üîç Search Rooms]
        JoinBuyerRoom[üö™ Join Buyer Room]
        HandleSupport[üéß Handle Support]
        TransferChat[üîÑ Transfer Chat]
        CloseChat[‚ùå Close Chat]
    end
    
    subgraph "Chat Status Management"
        UserOnline[üü¢ User Online]
        UserTyping[‚úèÔ∏è User Typing]
        UserIdle[üü° User Idle]
        UserOffline[üî¥ User Offline]
        UpdateStatus[üîÑ Update Status]
    end
    
    UserConnect --> RequestToken
    RequestToken --> ValidateToken
    ValidateToken --> CreateWebSocket
    CreateWebSocket --> JoinChatRoom
    JoinChatRoom --> ConnectionEstablished
    
    ConnectionEstablished --> ComposeMessage
    ComposeMessage --> ValidateMessage
    ValidateMessage --> SendMessage
    SendMessage --> SaveToDatabase
    SaveToDatabase --> BroadcastMessage
    BroadcastMessage --> UpdateUI
    
    BroadcastMessage --> ReceiveMessage
    ReceiveMessage --> DisplayMessage
    DisplayMessage --> PlayNotification
    PlayNotification --> MarkAsRead
    
    ConnectionEstablished --> ViewAllRooms
    ViewAllRooms --> SearchRooms
    SearchRooms --> JoinBuyerRoom
    JoinBuyerRoom --> HandleSupport
    HandleSupport --> TransferChat
    HandleSupport --> CloseChat
    
    ConnectionEstablished --> UserOnline
    UserOnline --> UserTyping
    UserTyping --> UserIdle
    UserIdle --> UserOffline
    UserOffline --> UpdateStatus
    UpdateStatus --> UserOnline
    
    UpdateUI --> End([üí¨ Chat Flow Complete])
    MarkAsRead --> End
    CloseChat --> End
```

### Chat Room States

```mermaid
stateDiagram-v2
    [*] --> RoomCreated
    RoomCreated --> WaitingForCustomer : Customer Joins
    WaitingForCustomer --> ActiveChat : Admin Joins
    WaitingForCustomer --> CustomerOnly : Customer Active
    
    CustomerOnly --> ActiveChat : Admin Joins
    ActiveChat --> CustomerOnly : Admin Leaves
    ActiveChat --> AdminOnly : Customer Leaves
    
    AdminOnly --> ActiveChat : Customer Returns
    AdminOnly --> RoomIdle : Admin Leaves
    
    CustomerOnly --> RoomIdle : Customer Leaves
    RoomIdle --> WaitingForCustomer : Customer Returns
    RoomIdle --> AdminOnly : Admin Joins
    
    ActiveChat --> ChatResolved : Issue Resolved
    ChatResolved --> RoomClosed : Close Chat
    RoomClosed --> [*]
    
    state ActiveChat {
        [*] --> MessagesExchanged
        MessagesExchanged --> TypingIndicator
        TypingIndicator --> MessagesExchanged
        MessagesExchanged --> FileSharing
        FileSharing --> MessagesExchanged
    }
```

---

## ‚ö†Ô∏è Error Handling Flow

### Comprehensive Error Management

```mermaid
flowchart TD
    ErrorOccurred[‚ö†Ô∏è Error Occurred]
    
    subgraph "Error Classification"
        ClassifyError[üîç Classify Error Type]
        ErrorType{Error Type?}
        ValidationError[üìù Validation Error]
        DatabaseError[üóÑÔ∏è Database Error]
        PaymentError[üí≥ Payment Error]
        AuthenticationError[üîê Auth Error]
        SystemError[üîß System Error]
        NetworkError[üåê Network Error]
    end
    
    subgraph "Validation Error Handling"
        ShowFieldErrors[üìù Show Field Errors]
        HighlightInvalidFields[üî¥ Highlight Invalid Fields]
        ProvideCorrection[üí° Provide Correction Hints]
        ReturnToForm[‚Ü©Ô∏è Return to Form]
    end
    
    subgraph "Database Error Handling"
        LogDatabaseError[üìù Log Database Error]
        CheckConnection[üîç Check DB Connection]
        RetryOperation[üîÑ Retry Operation]
        ShowGenericError[‚ö†Ô∏è Show Generic Error Message]
        NotifyAdministrator[üìß Notify Administrator]
    end
    
    subgraph "Payment Error Handling"
        LogPaymentError[üìù Log Payment Error]
        ShowPaymentError[üí≥ Show Payment Error]
        OfferRetry[üîÑ Offer Retry Payment]
        SuggestAlternative[üí° Suggest Alternative Payment]
        ContactSupport[üìû Contact Support Option]
    end
    
    subgraph "Authentication Error Handling"
        LogSecurityEvent[üîí Log Security Event]
        ClearSession[üóëÔ∏è Clear Session]
        RedirectToLogin[üîê Redirect to Login]
        ShowAuthError[‚ö†Ô∏è Show Auth Error]
        BlockSuspiciousActivity[üö´ Block Suspicious Activity]
    end
    
    subgraph "System Error Handling"
        LogSystemError[üìù Log System Error]
        CheckSystemHealth[üíä Check System Health]
        ShowMaintenanceMode[üîß Maintenance Mode]
        NotifyDevelopers[üë®‚Äçüíª Notify Developers]
        CreateErrorReport[üìä Create Error Report]
    end
    
    subgraph "Network Error Handling"
        DetectNetworkIssue[üåê Detect Network Issue]
        ShowOfflineMode[üì¥ Show Offline Mode]
        QueueOperations[üìã Queue Operations]
        RetryOnConnection[üîÑ Retry on Connection]
        CacheFailedRequests[üíæ Cache Failed Requests]
    end
    
    subgraph "Error Recovery"
        AttemptRecovery[üîß Attempt Recovery]
        RecoverySuccessful{Recovery Success?}
        RestoreOperation[‚úÖ Restore Operation]
        EscalateError[‚¨ÜÔ∏è Escalate Error]
        ShowFallbackUI[üéØ Show Fallback UI]
    end
    
    subgraph "User Communication"
        ShowErrorMessage[üí¨ Show Error Message]
        ProvideContext[üìù Provide Context]
        OfferSolutions[üí° Offer Solutions]
        CollectFeedback[üìù Collect User Feedback]
    end
    
    subgraph "Error Monitoring"
        LogErrorDetails[üìù Log Error Details]
        UpdateErrorMetrics[üìä Update Error Metrics]
        TriggerAlerts[üö® Trigger Alerts]
        AnalyzePatterns[üìà Analyze Error Patterns]
    end
    
    ErrorOccurred --> ClassifyError
    ClassifyError --> ErrorType
    
    ErrorType --> ValidationError
    ErrorType --> DatabaseError
    ErrorType --> PaymentError
    ErrorType --> AuthenticationError
    ErrorType --> SystemError
    ErrorType --> NetworkError
    
    ValidationError --> ShowFieldErrors
    ShowFieldErrors --> HighlightInvalidFields
    HighlightInvalidFields --> ProvideCorrection
    ProvideCorrection --> ReturnToForm
    
    DatabaseError --> LogDatabaseError
    LogDatabaseError --> CheckConnection
    CheckConnection --> RetryOperation
    RetryOperation --> ShowGenericError
    ShowGenericError --> NotifyAdministrator
    
    PaymentError --> LogPaymentError
    LogPaymentError --> ShowPaymentError
    ShowPaymentError --> OfferRetry
    OfferRetry --> SuggestAlternative
    SuggestAlternative --> ContactSupport
    
    AuthenticationError --> LogSecurityEvent
    LogSecurityEvent --> ClearSession
    ClearSession --> RedirectToLogin
    RedirectToLogin --> ShowAuthError
    ShowAuthError --> BlockSuspiciousActivity
    
    SystemError --> LogSystemError
    LogSystemError --> CheckSystemHealth
    CheckSystemHealth --> ShowMaintenanceMode
    ShowMaintenanceMode --> NotifyDevelopers
    NotifyDevelopers --> CreateErrorReport
    
    NetworkError --> DetectNetworkIssue
    DetectNetworkIssue --> ShowOfflineMode
    ShowOfflineMode --> QueueOperations
    QueueOperations --> RetryOnConnection
    RetryOnConnection --> CacheFailedRequests
    
    %% All error types lead to recovery attempt
    ReturnToForm --> AttemptRecovery
    NotifyAdministrator --> AttemptRecovery
    ContactSupport --> AttemptRecovery
    BlockSuspiciousActivity --> AttemptRecovery
    CreateErrorReport --> AttemptRecovery
    CacheFailedRequests --> AttemptRecovery
    
    AttemptRecovery --> RecoverySuccessful
    RecoverySuccessful -->|‚úÖ Success| RestoreOperation
    RecoverySuccessful -->|‚ùå Failed| EscalateError
    EscalateError --> ShowFallbackUI
    
    %% User communication for all paths
    RestoreOperation --> ShowErrorMessage
    ShowFallbackUI --> ShowErrorMessage
    ShowErrorMessage --> ProvideContext
    ProvideContext --> OfferSolutions
    OfferSolutions --> CollectFeedback
    
    %% Error monitoring for all paths
    CollectFeedback --> LogErrorDetails
    LogErrorDetails --> UpdateErrorMetrics
    UpdateErrorMetrics --> TriggerAlerts
    TriggerAlerts --> AnalyzePatterns
    
    AnalyzePatterns --> End([üìä Error Handled])
```

---

## üöÄ Deployment Architecture

### Cloud Deployment Flow

```mermaid
flowchart TD
    Developer[üë®‚Äçüíª Developer]
    
    subgraph "Development Environment"
        LocalDev[üíª Local Development]
        TestingLocal[üß™ Local Testing]
        CodeReview[üë• Code Review]
        CommitChanges[üìù Commit Changes]
    end
    
    subgraph "Cloud Development Environment"
        CloudIDE[üåê Cloud IDE/Editor]
        GitIntegration[üîÑ Git Integration]
        EnvironmentSetup[‚öôÔ∏è Environment Setup]
        DependencyInstall[üì¶ Dependency Installation]
    end
    
    subgraph "Application Setup"
        FlaskAppSetup[üé∏ Flask App Setup]
        DatabaseSetup[üóÑÔ∏è Database Setup]
        ChatServiceSetup[üí¨ Chat Service Setup]
        StaticFilesSetup[üìÅ Static Files Setup]
    end
    
    subgraph "Configuration Management"
        SecretsManagement[üîê Secrets Management]
        EnvironmentVars[üîß Environment Variables]
        ConfigValidation[‚úÖ Config Validation]
        SecuritySettings[üõ°Ô∏è Security Settings]
    end
    
    subgraph "Service Initialization"
        PostgreSQLSetup[üêò PostgreSQL Setup]
        FlaskServerStart[üé∏ Flask Server Start]
        DjangoServiceStart[üí¨ Django Service Start]
        WebSocketSetup[üîå WebSocket Setup]
    end
    
    subgraph "Health Checks"
        DatabaseHealth[üíä Database Health]
        ServiceHealth[üíä Service Health]
        APIHealth[üíä API Health]
        ChatHealth[üíä Chat Health]
    end
    
    subgraph "Monitoring & Logging"
        ErrorLogging[üìù Error Logging]
        PerformanceMonitoring[üìä Performance Monitoring]
        UserAnalytics[üë• User Analytics]
        SystemMetrics[üìà System Metrics]
    end
    
    subgraph "Production Features"
        HTTPSEnforcement[üîí HTTPS Enforcement]
        CORSConfiguration[üåê CORS Configuration]
        RateLimiting[‚è±Ô∏è Rate Limiting]
        SecurityHeaders[üõ°Ô∏è Security Headers]
    end
    
    Developer --> LocalDev
    LocalDev --> TestingLocal
    TestingLocal --> CodeReview
    CodeReview --> CommitChanges
    CommitChanges --> CloudIDE
    
    CloudIDE --> GitIntegration
    GitIntegration --> EnvironmentSetup
    EnvironmentSetup --> DependencyInstall
    
    DependencyInstall --> FlaskAppSetup
    FlaskAppSetup --> DatabaseSetup
    DatabaseSetup --> ChatServiceSetup
    ChatServiceSetup --> StaticFilesSetup
    
    StaticFilesSetup --> SecretsManagement
    SecretsManagement --> EnvironmentVars
    EnvironmentVars --> ConfigValidation
    ConfigValidation --> SecuritySettings
    
    SecuritySettings --> PostgreSQLSetup
    PostgreSQLSetup --> FlaskServerStart
    FlaskServerStart --> DjangoServiceStart
    DjangoServiceStart --> WebSocketSetup
    
    WebSocketSetup --> DatabaseHealth
    DatabaseHealth --> ServiceHealth
    ServiceHealth --> APIHealth
    APIHealth --> ChatHealth
    
    ChatHealth --> ErrorLogging
    ErrorLogging --> PerformanceMonitoring
    PerformanceMonitoring --> UserAnalytics
    UserAnalytics --> SystemMetrics
    
    SystemMetrics --> HTTPSEnforcement
    HTTPSEnforcement --> CORSConfiguration
    CORSConfiguration --> RateLimiting
    RateLimiting --> SecurityHeaders
    
    SecurityHeaders --> ProductionReady[üöÄ Production Ready]
    ProductionReady --> End([‚úÖ Deployment Complete])
```

### System Architecture in Production

```mermaid
graph TD
    subgraph "Cloud Platform Infrastructure"
        subgraph "Application Layer"
            FlaskApp[üé∏ Flask Application<br/>Port 5000<br/>Main E-commerce App]
            DjangoChat[üí¨ Django Chat Service<br/>Port 8000<br/>Real-time Chat]
        end
        
        subgraph "Data Layer"
            PostgresDB[(üêò PostgreSQL<br/>Main Database<br/>Products, Orders, Users)]
            ChatDB[(üí¨ SQLite<br/>Chat Database<br/>Messages, Rooms)]
            FileStorage[üìÅ Static File Storage<br/>Product Images, Documents]
        end
        
        subgraph "Security Layer"
            HTTPS[üîí HTTPS Termination]
            CORS[üåê CORS Headers]
            CSRF[üõ°Ô∏è CSRF Protection]
            Auth[üîê JWT Authentication]
        end
    end
    
    subgraph "External Services"
        StripeAPI[üí≥ Stripe Payment Gateway]
        MidtransAPI[üí∞ Midtrans Payment Gateway]
        EmailService[üìß Email Service]
        CourierAPI[üöö Courier APIs]
    end
    
    subgraph "Client Applications"
        WebBrowser[üåê Web Browser<br/>Customer Interface]
        AdminPanel[üë®‚Äçüíº Admin Panel<br/>Management Interface]
        MobileView[üì± Mobile View<br/>Responsive Design]
    end
    
    %% Client connections
    WebBrowser --> HTTPS
    AdminPanel --> HTTPS
    MobileView --> HTTPS
    
    %% Security layer
    HTTPS --> CORS
    CORS --> CSRF
    CSRF --> Auth
    
    %% Application connections
    Auth --> FlaskApp
    FlaskApp --> DjangoChat
    
    %% Data connections
    FlaskApp --> PostgresDB
    FlaskApp --> FileStorage
    DjangoChat --> ChatDB
    
    %% External service connections
    FlaskApp --> StripeAPI
    FlaskApp --> MidtransAPI
    FlaskApp --> EmailService
    FlaskApp --> CourierAPI
    
    %% WebSocket connections
    WebBrowser -.->|WebSocket| DjangoChat
    AdminPanel -.->|WebSocket| DjangoChat
    MobileView -.->|WebSocket| DjangoChat
```

---

## üìà Performance & Scaling Considerations

### Database Performance Optimization

```mermaid
flowchart TD
    DatabaseQuery[üîç Database Query]
    
    subgraph "Query Optimization"
        AnalyzeQuery[üìä Analyze Query]
        CheckIndexes[üìö Check Indexes]
        OptimizeJoins[üîó Optimize Joins]
        QueryCaching[üíæ Query Caching]
    end
    
    subgraph "Connection Management"
        ConnectionPool[üèä Connection Pool]
        ConnectionLimit[‚öñÔ∏è Connection Limits]
        ConnectionTimeout[‚è∞ Connection Timeout]
        HealthCheck[üíä Health Check]
    end
    
    subgraph "Data Management"
        DataArchiving[üì¶ Data Archiving]
        IndexMaintenance[üîß Index Maintenance]
        StatisticsUpdate[üìä Statistics Update]
        VacuumProcess[üßπ Vacuum Process]
    end
    
    DatabaseQuery --> AnalyzeQuery
    AnalyzeQuery --> CheckIndexes
    CheckIndexes --> OptimizeJoins
    OptimizeJoins --> QueryCaching
    
    QueryCaching --> ConnectionPool
    ConnectionPool --> ConnectionLimit
    ConnectionLimit --> ConnectionTimeout
    ConnectionTimeout --> HealthCheck
    
    HealthCheck --> DataArchiving
    DataArchiving --> IndexMaintenance
    IndexMaintenance --> StatisticsUpdate
    StatisticsUpdate --> VacuumProcess
    
    VacuumProcess --> OptimizedPerformance[‚ö° Optimized Performance]
```

### Application Scaling Strategy

```mermaid
flowchart TD
    LoadIncrease[üìà Load Increase]
    
    subgraph "Horizontal Scaling"
        LoadBalancer[‚öñÔ∏è Load Balancer]
        MultipleInstances[üî¢ Multiple App Instances]
        SessionStickiness[üéØ Session Management]
    end
    
    subgraph "Vertical Scaling"
        CPUUpgrade[üîß CPU Upgrade]
        MemoryUpgrade[üíæ Memory Upgrade]
        StorageUpgrade[üíø Storage Upgrade]
    end
    
    subgraph "Caching Strategy"
        ApplicationCache[‚ö° Application Cache]
        DatabaseCache[üóÑÔ∏è Database Cache]
        StaticFileCache[üìÅ Static File Cache]
        RedisCache[üî¥ Redis Cache]
    end
    
    subgraph "Content Delivery"
        CDN[üåê Content Delivery Network]
        StaticAssets[üìÅ Static Assets]
        ImageOptimization[üñºÔ∏è Image Optimization]
        Compression[üóúÔ∏è Content Compression]
    end
    
    LoadIncrease --> LoadBalancer
    LoadIncrease --> CPUUpgrade
    
    LoadBalancer --> MultipleInstances
    MultipleInstances --> SessionStickiness
    
    CPUUpgrade --> MemoryUpgrade
    MemoryUpgrade --> StorageUpgrade
    
    SessionStickiness --> ApplicationCache
    StorageUpgrade --> ApplicationCache
    
    ApplicationCache --> DatabaseCache
    DatabaseCache --> StaticFileCache
    StaticFileCache --> RedisCache
    
    RedisCache --> CDN
    CDN --> StaticAssets
    StaticAssets --> ImageOptimization
    ImageOptimization --> Compression
    
    Compression --> ScaledApplication[üöÄ Scaled Application]
```

---

## üéØ Kesimpulan

Dokumentasi flowchart dan diagram ini mencakup:

### ‚úÖ Diagram yang Telah Didokumentasikan:

1. **üèóÔ∏è Arsitektur Sistem** - Flask-only dengan Django chat service
2. **üóÉÔ∏è Entity Relationship Diagram** - Complete database schema
3. **üìä Data Flow Diagram** - Level 0, 1, dan 2 dengan detail
4. **üë• Use Case Diagram** - Semua aktor dan use cases
5. **üõçÔ∏è Customer Journey** - Complete customer experience flow
6. **üë®‚Äçüíº Admin Workflow** - Dashboard dan management flows
7. **üìã Order Processing** - Complete order lifecycle
8. **üí≥ Payment Processing** - Multi-gateway payment flow
9. **üîê Authentication Flow** - Security dan session management
10. **üõí Cart Management** - Shopping cart operations
11. **üì¶ Inventory Management** - Stock dan restock flows
12. **üí¨ Chat System** - Real-time chat architecture
13. **‚ö†Ô∏è Error Handling** - Comprehensive error management
14. **üöÄ Deployment Architecture** - Cloud deployment flow

### üé∏ Karakteristik Sistem Hurtrock Music Store:

- **Modern E-commerce Platform** untuk alat musik
- **Flask-only Architecture** dengan Django chat service
- **Multi-payment Gateway** (Stripe & Midtrans)
- **Real-time Chat Support** menggunakan WebSocket
- **Comprehensive Admin Panel** dengan analytics
- **Mobile-responsive Design** dengan theme switching
- **Rock/Metal Themed UI** dengan typography khusus
- **Complete Order Management** dengan shipping labels
- **Inventory Management** dengan stock alerts
- **Security-first Approach** dengan CSRF dan JWT

Dokumentasi ini memberikan panduan lengkap untuk memahami alur kerja, integrasi, dan arsitektur sistem Hurtrock Music Store dari perspektif teknis dan bisnis.

---

**üé∏ Hurtrock Music Store** - *Rock Your Music Journey with Modern Technology*

**Made with ‚ù§Ô∏è by Fajar Julyana**
