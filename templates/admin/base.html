<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin - Hurtrock Music Store{% endblock %}</title>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="{{ url_for('static', filename='favicon/apple-icon-57x57.png') }}">
    <link rel="apple-touch-icon" sizes="60x60" href="{{ url_for('static', filename='favicon/apple-icon-60x60.png') }}">
    <link rel="apple-touch-icon" sizes="72x72" href="{{ url_for('static', filename='favicon/apple-icon-72x72.png') }}">
    <link rel="apple-touch-icon" sizes="76x76" href="{{ url_for('static', filename='favicon/apple-icon-76x76.png') }}">
    <link rel="apple-touch-icon" sizes="114x114" href="{{ url_for('static', filename='favicon/apple-icon-114x114.png') }}">
    <link rel="apple-touch-icon" sizes="120x120" href="{{ url_for('static', filename='favicon/apple-icon-120x120.png') }}">
    <link rel="apple-touch-icon" sizes="144x144" href="{{ url_for('static', filename='favicon/apple-icon-144x144.png') }}">
    <link rel="apple-touch-icon" sizes="152x152" href="{{ url_for('static', filename='favicon/apple-icon-152x152.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='favicon/apple-icon-180x180.png') }}">
    <link rel="icon" type="image/png" sizes="192x192" href="{{ url_for('static', filename='favicon/android-icon-192x192.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="96x96" href="{{ url_for('static', filename='favicon/favicon-96x96.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='favicon/manifest.json') }}">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="{{ url_for('static', filename='favicon/ms-icon-144x144.png') }}">
    <meta name="theme-color" content="#ffffff">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome - Multiple CDN fallbacks -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.4.0/css/all.css" crossorigin="anonymous">
    <!-- Google Fonts - Same as main site -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">

    <style>
    /* Admin Layout - Modern Professional Design */
    .admin-sidebar {
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        width: 280px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding-top: 20px;
        z-index: 999;
        box-shadow: 4px 0 25px rgba(0, 0, 0, 0.15);
        overflow-y: auto;
        border-right: 3px solid var(--orange-primary);
        transition: all 0.3s ease;
    }

    [data-theme="dark"] .admin-sidebar {
        background: linear-gradient(135deg, #1A1A1A 0%, #2D2D2D 100%);
        border-right: 3px solid var(--orange-primary);
        box-shadow: 4px 0 25px rgba(0, 0, 0, 0.3);
    }

    .admin-sidebar .nav-link {
        color: var(--black-primary);
        padding: 1rem 1.5rem;
        border-radius: 12px;
        margin: 0.3rem 1rem;
        transition: all 0.3s ease;
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        letter-spacing: 0.3px;
        border: 1px solid transparent;
    }

    [data-theme="dark"] .admin-sidebar .nav-link {
        color: rgba(255, 255, 255, 0.8);
    }

    .admin-sidebar .nav-link:hover {
        color: white !important;
        background: linear-gradient(135deg, var(--orange-primary), var(--orange-secondary));
        transform: translateX(8px);
        box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .admin-sidebar .nav-link.active {
        color: white !important;
        background: linear-gradient(135deg, var(--orange-primary), var(--orange-secondary)) !important;
        transform: translateX(8px);
        box-shadow: 0 6px 20px rgba(255, 107, 53, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .admin-sidebar .nav-link i {
        width: 20px;
        text-align: center;
        margin-right: 0.75rem;
    }

    .admin-main-content {
        margin-left: 280px;
        padding: 30px;
        background: var(--white-primary);
        min-height: 100vh;
        transition: all 0.3s ease;
    }

    [data-theme="dark"] .admin-main-content {
        background: var(--white-primary);
    }

    /* Admin Brand */
    .admin-brand {
        padding: 1.5rem;
        text-align: center;
        border-bottom: 1px solid rgba(255, 107, 53, 0.2);
        margin-bottom: 1rem;
    }

    .admin-brand h4 {
        color: var(--orange-primary);
        font-family: 'Playfair Display', serif;
        font-weight: 700;
        margin: 0;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        font-size: 1.5rem;
    }

    .admin-brand .subtitle {
        color: var(--gray-medium);
        font-size: 0.85rem;
        margin-top: 0.5rem;
        font-family: 'Inter', sans-serif;
    }

    [data-theme="dark"] .admin-brand .subtitle {
        color: rgba(255, 255, 255, 0.7);
    }

    /* Admin Header */
    .admin-header {
        background: linear-gradient(135deg, var(--white-primary) 0%, var(--gray-light) 100%);
        padding: 1.5rem 0;
        margin-bottom: 2rem;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        border-left: 5px solid var(--orange-primary);
    }

    [data-theme="dark"] .admin-header {
        background: linear-gradient(135deg, var(--black-secondary) 0%, #404040 100%);
        color: var(--black-primary);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    /* Cards and Components */
    .admin-content .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        border-left: 4px solid var(--orange-primary);
    }

    .admin-content .card:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.12);
    }

    .admin-content .card-header {
        background: linear-gradient(135deg, var(--orange-primary), var(--orange-secondary));
        color: white;
        border-bottom: none;
        font-weight: 600;
        letter-spacing: 0.5px;
        padding: 1.25rem;
        border-radius: 15px 15px 0 0;
    }

    /* Buttons */
    .admin-content .btn-orange {
        background: linear-gradient(135deg, var(--orange-primary), var(--orange-secondary));
        border: none;
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        letter-spacing: 0.5px;
        border-radius: 8px;
        transition: all 0.3s ease;
        color: white;
    }

    .admin-content .btn-orange:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        color: white;
    }

    /* Tables */
    .admin-content .table {
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .admin-content .table thead th {
        background: linear-gradient(135deg, var(--orange-primary), var(--orange-secondary));
        color: white;
        border: none;
        font-weight: 600;
        letter-spacing: 0.5px;
        padding: 1rem;
    }

    /* Theme Toggle for Admin */
    .admin-theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1001;
        background: var(--orange-primary);
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        color: white;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
    }

    .admin-theme-toggle:hover {
        background: var(--orange-secondary);
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        color: white;
    }

    /* Page Headers */
    .page-header {
        margin-bottom: 2rem;
    }

    .page-header h1,
    .page-header h2,
    .page-header h3,
    .page-header h4,
    .page-header h5,
    .page-header h6 {
        color: var(--orange-primary) !important;
        font-family: 'Playfair Display', serif;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .page-header p {
        color: var(--gray-medium);
        margin: 0;
    }

    [data-theme="dark"] .page-header p {
        color: #adb5bd;
    }

    /* Fix admin content text colors */
    .admin-content h1,
    .admin-content h2,
    .admin-content h3,
    .admin-content h4,
    .admin-content h5,
    .admin-content h6 {
        color: var(--black-primary) !important;
    }

    [data-theme="dark"] .admin-content h1,
    [data-theme="dark"] .admin-content h2,
    [data-theme="dark"] .admin-content h3,
    [data-theme="dark"] .admin-content h4,
    [data-theme="dark"] .admin-content h5,
    [data-theme="dark"] .admin-content h6 {
        color: var(--white-primary) !important;
    }

    /* Admin Stats Cards */
    .stat-card {
        background: linear-gradient(135deg, var(--orange-primary), var(--orange-secondary));
        color: white;
        border-radius: 15px;
        padding: 1.5rem;
        text-align: center;
        transition: all 0.3s ease;
        border: none;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
    }

    .stat-card h3 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .stat-card p {
        margin: 0;
        opacity: 0.9;
        font-weight: 500;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .admin-sidebar {
            margin-left: -280px;
            transition: margin-left 0.3s ease;
        }

        .admin-sidebar.show {
            margin-left: 0;
        }

        .admin-main-content {
            margin-left: 0;
            padding: 20px 15px;
        }

        .admin-content .card {
            margin-bottom: 1rem;
        }

        .mobile-menu-toggle {
            display: block;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1002;
            background: var(--orange-primary);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem;
            font-size: 1.2rem;
        }
    }

    .mobile-menu-toggle {
        display: none;
    }

    /* Form Styling */
    .admin-content .form-control {
        border-radius: 8px;
        border: 2px solid #dee2e6;
        padding: 0.75rem 1rem;
        transition: all 0.3s ease;
    }

    .admin-content .form-control:focus {
        border-color: var(--orange-primary);
        box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.25);
    }

    .admin-content .form-label {
        font-weight: 600;
        color: var(--black-primary);
        margin-bottom: 0.5rem;
    }

    [data-theme="dark"] .admin-content .form-label {
        color: var(--black-primary);
    }
    </style>

    {% block extra_head %}{% endblock %}
<!-- Enhanced Icon Fallback Script -->
    <script>
    // Comprehensive Font Awesome fallback detection and replacement
    function checkFontAwesome() {
        const testEl = document.createElement('i');
        testEl.className = 'fas fa-check';
        testEl.style.position = 'absolute';
        testEl.style.visibility = 'hidden';
        testEl.style.fontSize = '16px';
        document.body.appendChild(testEl);

        const computedStyle = window.getComputedStyle(testEl, ':before');
        const width = computedStyle.getPropertyValue('width');
        const fontFamily = computedStyle.getPropertyValue('font-family');
        document.body.removeChild(testEl);

        const fontAwesomeLoaded = fontFamily && (fontFamily.includes('Font Awesome') || fontFamily.includes('FontAwesome'));

        if (!fontAwesomeLoaded || width === '0px' || width === 'auto') {
            // Font Awesome not loaded, add comprehensive inline fallback
            const style = document.createElement('style');
            style.innerHTML = `
                /* Sidebar Navigation Icons */
                .fa-chart-bar::before, .fas.fa-chart-bar::before { content: "ğŸ“Š"; }
                .fa-box::before, .fas.fa-box::before { content: "ğŸ“¦"; }
                .fa-tags::before, .fas.fa-tags::before { content: "ğŸ·ï¸"; }
                .fa-shopping-bag::before, .fas.fa-shopping-bag::before { content: "ğŸ›ï¸"; }
                .fa-users::before, .fas.fa-users::before { content: "ğŸ‘¥"; }
                .fa-truck::before, .fas.fa-truck::before { content: "ğŸšš"; }
                .fa-shipping-fast::before, .fas.fa-shipping-fast::before { content: "ğŸš€"; }
                .fa-credit-card::before, .fas.fa-credit-card::before { content: "ğŸ’³"; }
                .fa-boxes::before, .fas.fa-boxes::before { content: "ğŸ“¦"; }
                .fa-comments::before, .fas.fa-comments::before { content: "ğŸ’¬"; }
                .fa-chart-line::before, .fas.fa-chart-line::before { content: "ğŸ“ˆ"; }
                .fa-home::before, .fas.fa-home::before { content: "ğŸ "; }
                .fa-sign-out-alt::before, .fas.fa-sign-out-alt::before { content: "ğŸšª"; }
                .fa-music::before, .fas.fa-music::before { content: "ğŸµ"; }
                .fa-bars::before, .fas.fa-bars::before { content: "â˜°"; }
                .fa-moon::before, .fas.fa-moon::before { content: "ğŸŒ™"; }
                .fa-sun::before, .fas.fa-sun::before { content: "â˜€ï¸"; }

                /* Action Icons (Edit, Delete, View, etc.) */
                .fa-edit::before, .fas.fa-edit::before { content: "âœï¸"; }
                .fa-trash::before, .fas.fa-trash::before { content: "ğŸ—‘ï¸"; }
                .fa-trash-alt::before, .fas.fa-trash-alt::before { content: "ğŸ—‘ï¸"; }
                .fa-eye::before, .fas.fa-eye::before { content: "ğŸ‘ï¸"; }
                .fa-eye-slash::before, .fas.fa-eye-slash::before { content: "ğŸ™ˆ"; }
                .fa-plus::before, .fas.fa-plus::before { content: "â•"; }
                .fa-minus::before, .fas.fa-minus::before { content: "â–"; }
                .fa-save::before, .fas.fa-save::before { content: "ğŸ’¾"; }
                .fa-check::before, .fas.fa-check::before { content: "âœ…"; }
                .fa-times::before, .fas.fa-times::before { content: "âŒ"; }
                .fa-close::before, .fas.fa-close::before { content: "âŒ"; }
                .fa-cancel::before, .fas.fa-cancel::before { content: "âŒ"; }
                .fa-download::before, .fas.fa-download::before { content: "â¬‡ï¸"; }
                .fa-upload::before, .fas.fa-upload::before { content: "â¬†ï¸"; }
                .fa-print::before, .fas.fa-print::before { content: "ğŸ–¨ï¸"; }
                .fa-copy::before, .fas.fa-copy::before { content: "ğŸ“‹"; }
                .fa-search::before, .fas.fa-search::before { content: "ğŸ”"; }
                .fa-filter::before, .fas.fa-filter::before { content: "ğŸ”½"; }
                .fa-sort::before, .fas.fa-sort::before { content: "â¬"; }
                .fa-sort-up::before, .fas.fa-sort-up::before { content: "â¬†ï¸"; }
                .fa-sort-down::before, .fas.fa-sort-down::before { content: "â¬‡ï¸"; }
                .fa-refresh::before, .fas.fa-refresh::before { content: "ğŸ”„"; }
                .fa-sync::before, .fas.fa-sync::before { content: "ğŸ”„"; }
                .fa-reload::before, .fas.fa-reload::before { content: "ğŸ”„"; }

                /* Status Icons */
                .fa-check-circle::before, .fas.fa-check-circle::before { content: "âœ…"; }
                .fa-times-circle::before, .fas.fa-times-circle::before { content: "âŒ"; }
                .fa-exclamation-triangle::before, .fas.fa-exclamation-triangle::before { content: "âš ï¸"; }
                .fa-exclamation-circle::before, .fas.fa-exclamation-circle::before { content: "â—"; }
                .fa-info-circle::before, .fas.fa-info-circle::before { content: "â„¹ï¸"; }
                .fa-question-circle::before, .fas.fa-question-circle::before { content: "â“"; }

                /* Navigation Icons */
                .fa-arrow-left::before, .fas.fa-arrow-left::before { content: "â†"; }
                .fa-arrow-right::before, .fas.fa-arrow-right::before { content: "â†’"; }
                .fa-arrow-up::before, .fas.fa-arrow-up::before { content: "â†‘"; }
                .fa-arrow-down::before, .fas.fa-arrow-down::before { content: "â†“"; }
                .fa-chevron-left::before, .fas.fa-chevron-left::before { content: "â€¹"; }
                .fa-chevron-right::before, .fas.fa-chevron-right::before { content: "â€º"; }
                .fa-chevron-up::before, .fas.fa-chevron-up::before { content: "^"; }
                .fa-chevron-down::before, .fas.fa-chevron-down::before { content: "v"; }

                /* Settings and Config Icons */
                .fa-cog::before, .fas.fa-cog::before { content: "âš™ï¸"; }
                .fa-cogs::before, .fas.fa-cogs::before { content: "âš™ï¸"; }
                .fa-wrench::before, .fas.fa-wrench::before { content: "ğŸ”§"; }
                .fa-tools::before, .fas.fa-tools::before { content: "ğŸ”§"; }
                .fa-settings::before, .fas.fa-settings::before { content: "âš™ï¸"; }

                /* File and Document Icons */
                .fa-file::before, .fas.fa-file::before { content: "ğŸ“„"; }
                .fa-file-alt::before, .fas.fa-file-alt::before { content: "ğŸ“„"; }
                .fa-file-pdf::before, .fas.fa-file-pdf::before { content: "ğŸ“•"; }
                .fa-file-excel::before, .fas.fa-file-excel::before { content: "ğŸ“Š"; }
                .fa-file-image::before, .fas.fa-file-image::before { content: "ğŸ–¼ï¸"; }
                .fa-folder::before, .fas.fa-folder::before { content: "ğŸ“"; }
                .fa-folder-open::before, .fas.fa-folder-open::before { content: "ğŸ“‚"; }

                /* User and Security Icons */
                .fa-user::before, .fas.fa-user::before { content: "ğŸ‘¤"; }
                .fa-user-plus::before, .fas.fa-user-plus::before { content: "ğŸ‘¤â•"; }
                .fa-user-minus::before, .fas.fa-user-minus::before { content: "ğŸ‘¤â–"; }
                .fa-user-edit::before, .fas.fa-user-edit::before { content: "ğŸ‘¤âœï¸"; }
                .fa-user-shield::before, .fas.fa-user-shield::before { content: "ğŸ›¡ï¸"; }
                .fa-lock::before, .fas.fa-lock::before { content: "ğŸ”’"; }
                .fa-unlock::before, .fas.fa-unlock::before { content: "ğŸ”“"; }
                .fa-key::before, .fas.fa-key::before { content: "ğŸ”‘"; }

                /* Commerce Icons */
                .fa-shopping-cart::before, .fas.fa-shopping-cart::before { content: "ğŸ›’"; }
                .fa-cart-plus::before, .fas.fa-cart-plus::before { content: "ğŸ›’â•"; }
                .fa-money-bill::before, .fas.fa-money-bill::before { content: "ğŸ’µ"; }
                .fa-dollar-sign::before, .fas.fa-dollar-sign::before { content: "ğŸ’²"; }
                .fa-receipt::before, .fas.fa-receipt::before { content: "ğŸ§¾"; }
                .fa-invoice::before, .fas.fa-invoice::before { content: "ğŸ§¾"; }

                /* Communication Icons */
                .fa-phone::before, .fas.fa-phone::before { content: "ğŸ“"; }
                .fa-envelope::before, .fas.fa-envelope::before { content: "ğŸ“§"; }
                .fa-mail::before, .fas.fa-mail::before { content: "ğŸ“§"; }
                .fa-message::before, .fas.fa-message::before { content: "ğŸ’¬"; }
                .fa-chat::before, .fas.fa-chat::before { content: "ğŸ’¬"; }

                /* Time and Calendar Icons */
                .fa-clock::before, .fas.fa-clock::before { content: "ğŸ•"; }
                .fa-calendar::before, .fas.fa-calendar::before { content: "ğŸ“…"; }
                .fa-calendar-alt::before, .fas.fa-calendar-alt::before { content: "ğŸ“…"; }
                .fa-calendar-day::before, .fas.fa-calendar-day::before { content: "ğŸ“…"; }
                .fa-history::before, .fas.fa-history::before { content: "ğŸ•"; }

                /* Media Icons */
                .fa-image::before, .fas.fa-image::before { content: "ğŸ–¼ï¸"; }
                .fa-video::before, .fas.fa-video::before { content: "ğŸ“¹"; }
                .fa-camera::before, .fas.fa-camera::before { content: "ğŸ“·"; }
                .fa-microphone::before, .fas.fa-microphone::before { content: "ğŸ¤"; }
                .fa-volume-up::before, .fas.fa-volume-up::before { content: "ğŸ”Š"; }
                .fa-headphones::before, .fas.fa-headphones::before { content: "ğŸ§"; }

                /* Location Icons */
                .fa-map::before, .fas.fa-map::before { content: "ğŸ—ºï¸"; }
                .fa-map-marker::before, .fas.fa-map-marker::before { content: "ğŸ“"; }
                .fa-map-marker-alt::before, .fas.fa-map-marker-alt::before { content: "ğŸ“"; }
                .fa-location::before, .fas.fa-location::before { content: "ğŸ“"; }

                /* Miscellaneous Icons */
                .fa-star::before, .fas.fa-star::before { content: "â­"; }
                .fa-heart::before, .fas.fa-heart::before { content: "â¤ï¸"; }
                .fa-thumbs-up::before, .fas.fa-thumbs-up::before { content: "ğŸ‘"; }
                .fa-thumbs-down::before, .fas.fa-thumbs-down::before { content: "ğŸ‘"; }
                .fa-flag::before, .fas.fa-flag::before { content: "ğŸš©"; }
                .fa-bookmark::before, .fas.fa-bookmark::before { content: "ğŸ”–"; }
                .fa-tag::before, .fas.fa-tag::before { content: "ğŸ·ï¸"; }
                .fa-fire::before, .fas.fa-fire::before { content: "ğŸ”¥"; }
                .fa-bolt::before, .fas.fa-bolt::before { content: "âš¡"; }
                .fa-power-off::before, .fas.fa-power-off::before { content: "â»"; }
                .fa-wifi::before, .fas.fa-wifi::before { content: "ğŸ“¶"; }
                .fa-signal::before, .fas.fa-signal::before { content: "ğŸ“¶"; }
                .fa-battery-full::before, .fas.fa-battery-full::before { content: "ğŸ”‹"; }
                .fa-plug::before, .fas.fa-plug::before { content: "ğŸ”Œ"; }

                /* Default fallback for any unmatched icons */
                .fa::before, .fas::before, .far::before, .fab::before {
                    font-family: inherit !important;
                }

                /* Ensure fallback icons have proper styling */
                .fa, .fas, .far, .fab {
                    font-family: inherit;
                    font-style: normal;
                    font-variant: normal;
                    text-rendering: auto;
                    line-height: 1;
                    display: inline-block;
                    text-align: center;
                    vertical-align: middle;
                }
            `;
            document.head.appendChild(style);
            console.log('Font Awesome fallback icons loaded');
        } else {
            console.log('Font Awesome is properly loaded');
        }
    }

    // Enhanced check that runs multiple times to ensure icons are loaded
    function runIconCheck() {
        checkFontAwesome();

        // Additional check after a delay to catch late-loading CSS
        setTimeout(checkFontAwesome, 500);
        setTimeout(checkFontAwesome, 1000);
    }

    // Run check when DOM is loaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', runIconCheck);
    } else {
        runIconCheck();
    }

    // Also run when window is fully loaded
    window.addEventListener('load', runIconCheck);
    </script>
</head>
<body data-theme="light" {% if current_user.is_authenticated %}data-user-id="{{ current_user.id }}" data-user-name="{{ current_user.name }}" data-user-email="{{ current_user.email }}" data-user-role="{{ current_user.role }}"{% endif %}>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle d-md-none" onclick="toggleSidebar()">
        <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="6" width="18" height="2" rx="1" fill="currentColor"/>
            <rect x="3" y="11" width="18" height="2" rx="1" fill="currentColor"/>
            <rect x="3" y="16" width="18" height="2" rx="1" fill="currentColor"/>
        </svg>
    </button>

    <!-- Theme Toggle -->
    <button class="admin-theme-toggle" onclick="toggleTheme()">
        <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="themeIcon">
            <path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79Z" fill="currentColor"/>
        </svg>
    </button>

    <!-- Admin Sidebar -->
    <div class="admin-sidebar" id="adminSidebar">
        <!-- Brand -->
        <div class="admin-brand">
            <h4>
                <svg class="admin-svg-icon me-2" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 3V21M18 8L12 12L6 8" stroke="currentColor" stroke-width="2" fill="none"/>
                    <circle cx="12" cy="12" r="3" fill="currentColor"/>
                    <path d="M8 17L12 13L16 17" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>Hurtrock
            </h4>
            <div class="subtitle">Admin Dashboard</div>
        </div>

        <!-- Navigation -->
        <nav class="nav flex-column">
            <a class="nav-link {% if request.endpoint == 'admin_dashboard' %}active{% endif %}" href="{{ url_for('admin_dashboard') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="7" height="9" rx="2" fill="currentColor"/>
                    <rect x="14" y="3" width="7" height="5" rx="2" fill="currentColor"/>
                    <rect x="14" y="12" width="7" height="9" rx="2" fill="currentColor"/>
                    <rect x="3" y="16" width="7" height="5" rx="2" fill="currentColor"/>
                </svg>Dashboard
            </a>
            <a class="nav-link {% if 'product' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_products') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="3" width="20" height="14" rx="3" fill="currentColor"/>
                    <rect x="8" y="21" width="8" height="2" rx="1" fill="currentColor"/>
                    <rect x="12" y="17" width="0" height="4" fill="currentColor"/>
                </svg>Produk
            </a>
            <a class="nav-link {% if 'categor' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_categories') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="7" height="7" rx="2" fill="currentColor"/>
                    <rect x="14" y="3" width="7" height="7" rx="2" fill="currentColor"/>
                    <rect x="3" y="14" width="7" height="7" rx="2" fill="currentColor"/>
                    <rect x="14" y="14" width="7" height="7" rx="2" fill="currentColor"/>
                </svg>Kategori
            </a>
            <a class="nav-link {% if 'order' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_orders') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="6" y="11" width="12" height="12" rx="2" fill="currentColor"/>
                    <circle cx="9" cy="9" r="1" fill="currentColor"/>
                    <path d="M7 1L5.5 4.5L2 6.5L5.5 8.5L7 12L8.5 8.5L12 6.5L8.5 4.5L7 1Z" fill="currentColor"/>
                </svg>Pesanan
            </a>
            <a class="nav-link {% if 'user' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_users') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="8" cy="7" r="4" fill="currentColor"/>
                    <path d="M2 21V19C2 15.1 5.1 12 9 12H7C10.9 12 14 15.1 14 19V21H2Z" fill="currentColor"/>
                    <circle cx="17" cy="8" r="3" fill="currentColor"/>
                    <path d="M22 21V20C22 17.8 20.2 16 18 16C16.8 16 15.7 16.4 14.9 17.1" fill="currentColor"/>
                </svg>Pengguna
            </a>
            <a class="nav-link {% if 'chat' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_chat') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 15C21 15.5 20.5 16 20 16H7L3 20V4C3 3.5 3.5 3 4 3H20C20.5 3 21 3.5 21 4V15Z" fill="currentColor"/>
                    <circle cx="9" cy="9" r="1" fill="#FFFFFF"/>
                    <circle cx="12" cy="9" r="1" fill="#FFFFFF"/>
                    <circle cx="15" cy="9" r="1" fill="#FFFFFF"/>
                </svg>Customer Service
            </a>
            <a class="nav-link {% if 'supplier' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_suppliers') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="1" y="8" width="22" height="13" rx="2" fill="currentColor"/>
                    <rect x="1" y="3" width="6" height="5" rx="1" fill="currentColor"/>
                    <circle cx="6" cy="17" r="2" fill="#FFFFFF"/>
                    <circle cx="18" cy="17" r="2" fill="#FFFFFF"/>
                </svg>Supplier
            </a>
            <a class="nav-link {% if 'shipping' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_shipping_services') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 18L18 18C20.2 18 22 16.2 22 14L22 10C22 7.8 20.2 6 18 6L8 6C5.8 6 4 7.8 4 10L4 14C4 16.2 5.8 18 8 18Z" fill="currentColor"/>
                    <path d="M2 12L6 8L6 16L2 12Z" fill="currentColor"/>
                    <circle cx="8" cy="12" r="1" fill="#FFFFFF"/>
                    <circle cx="12" cy="12" r="1" fill="#FFFFFF"/>
                    <circle cx="16" cy="12" r="1" fill="#FFFFFF"/>
                </svg>Pengiriman
            </a>
            <a class="nav-link {% if 'payment' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_payment_config') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="5" width="20" height="14" rx="3" fill="currentColor"/>
                    <rect x="2" y="9" width="20" height="1.5" fill="#FFFFFF"/>
                    <rect x="4" y="15" width="4" height="1" rx="0.5" fill="#FFFFFF"/>
                    <rect x="12" y="15" width="6" height="1" rx="0.5" fill="#FFFFFF"/>
                </svg>Pembayaran
            </a>
            <a class="nav-link {% if 'restock' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_restock_orders') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="8" height="8" rx="1" fill="currentColor"/>
                    <rect x="13" y="3" width="8" height="8" rx="1" fill="currentColor"/>
                    <rect x="3" y="13" width="8" height="8" rx="1" fill="currentColor"/>
                    <rect x="13" y="13" width="8" height="8" rx="1" fill="currentColor"/>
                    <circle cx="7" cy="7" r="1" fill="#FFFFFF"/>
                    <circle cx="17" cy="7" r="1" fill="#FFFFFF"/>
                    <circle cx="7" cy="17" r="1" fill="#FFFFFF"/>
                    <circle cx="17" cy="17" r="1" fill="#FFFFFF"/>
                </svg>Restock
            </a>
            <a class="nav-link {% if 'analytics' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_analytics') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="12" width="4" height="9" rx="1" fill="currentColor"/>
                    <rect x="10" y="8" width="4" height="13" rx="1" fill="currentColor"/>
                    <rect x="17" y="4" width="4" height="17" rx="1" fill="currentColor"/>
                </svg>Analitik
            </a>

            <hr style="border-color: rgba(255, 107, 53, 0.3); margin: 1rem;">

            <a class="nav-link {% if 'store-profile' in request.endpoint %}active{% endif %}" href="{{ url_for('admin_store_profile') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7V10C2 16 6 20 12 22C18 20 22 16 22 10V7L12 2Z" fill="currentColor"/>
                    <circle cx="12" cy="10" r="3" fill="#FFFFFF"/>
                    <path d="M7 15C7 13.9 9.2 13 12 13S17 13.9 17 15" stroke="#FFFFFF" stroke-width="1.5" fill="none"/>
                </svg>Profil Toko
            </a>

            <hr style="border-color: rgba(255, 107, 53, 0.3); margin: 1rem;">

            <a class="nav-link" href="{{ url_for('index') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 9V22H8V16H16V22H22V9L12 2Z" fill="currentColor"/>
                </svg>Kembali ke Toko
            </a>
            <a class="nav-link" href="{{ url_for('logout') }}">
                <svg class="admin-svg-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 21H5C4.4 21 4 20.6 4 20V4C4 3.4 4.4 3 5 3H9" fill="currentColor"/>
                    <path d="M16 17L21 12L16 7" fill="currentColor"/>
                    <path d="M21 12H9" fill="currentColor"/>
                </svg>Logout
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="admin-main-content">
        <div class="admin-content">
            {% block content %}{% endblock %}
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    // Theme Toggle
    function toggleTheme() {
        const body = document.body;
        const themeIcon = document.getElementById('themeIcon');

        if (body.getAttribute('data-theme') === 'dark') {
            body.setAttribute('data-theme', 'light');
            // Sun icon SVG
            themeIcon.innerHTML = '<circle cx="12" cy="12" r="5" fill="currentColor"/><path d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="2"/>';
            localStorage.setItem('admin-theme', 'light');
        } else {
            body.setAttribute('data-theme', 'dark');
            // Moon icon SVG
            themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79Z" fill="currentColor"/>';
            localStorage.setItem('admin-theme', 'dark');
        }
    }

    // Load saved theme
    document.addEventListener('DOMContentLoaded', function() {
        const savedTheme = localStorage.getItem('admin-theme') || 'dark';
        const themeIcon = document.getElementById('themeIcon');

        document.body.setAttribute('data-theme', savedTheme);
        if (savedTheme === 'dark') {
            // Moon icon SVG
            themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79Z" fill="currentColor"/>';
        } else {
            // Sun icon SVG
            themeIcon.innerHTML = '<circle cx="12" cy="12" r="5" fill="currentColor"/><path d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="2"/>';
        }
    });

    // Mobile Sidebar Toggle
    function toggleSidebar() {
        const sidebar = document.getElementById('adminSidebar');
        sidebar.classList.toggle('show');
    }

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function(event) {
        const sidebar = document.getElementById('adminSidebar');
        const toggleBtn = document.querySelector('.mobile-menu-toggle');

        if (window.innerWidth <= 768 && 
            !sidebar.contains(event.target) && 
            !toggleBtn.contains(event.target)) {
            sidebar.classList.remove('show');
        }
    });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>